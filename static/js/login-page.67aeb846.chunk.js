(this["webpackJsonpveho-react"]=this["webpackJsonpveho-react"]||[]).push([[95],{1346:function(e,t,a){"use strict";a.r(t),a.d(t,"GetBackDropScreen",(function(){return Ue})),a.d(t,"RenderLeftSidePanel",(function(){return _e})),a.d(t,"RenderRightSidePanel",(function(){return Fe})),a.d(t,"RenderInsideComponents",(function(){return Ve})),a.d(t,"RenderFooterComponent",(function(){return We})),a.d(t,"RenderHeaderText",(function(){return He}));var n=a(1),i=a(122),o=a.n(i),r=a(177),s=a(38),l=a(39),c=a(58),d=a(46),u=a(56),p=a(29),g=a(2),m=a(0),h=a.n(m),b=a(190),f=a(2166),v=a(623),y=a(1689),O=a(28),S=a(54),I=a(35),C=a.n(I),E=a(624),T=a.n(E),P=a(625),j=a.n(P),N=a(42),x=a(471),w=a(294),R=a(15),D=a(172),k=a(1631),L=a(292),M=a(1792),A=a(357),U=a(71),_=a(342),F=a(31),B=a(1722),G=a(61),V=a(253),W=a(1938),H=a(22),z=a(217),q=a(1601),K=a(214),$=a(20),Y=a(176),Q=a(354),X=a(23),Z=a(1723),J=a.n(Z),ee=a(138),te=a(145),ae=a(93),ne=a(14),ie=a(7),oe=(a(1619),a(1855)),re=a(249),se=a(1808),le=a(601),ce=a(612),de=a(1639),ue=a(161),pe=a(18),ge=a(1856),me=a(185),he=a(367),be=a(481),fe=a(82),ve=a(659),ye=a(232),Oe=a(16),Se=a(2167),Ie=a(106),Ce=a(143),Ee=a(170),Te=a(373),Pe=a(1332),je=a(1589),Ne=a(1585),xe=a(655),we=a.n(xe),Re=a(1879),De=a(841);function ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var Le=R.a.api_url,Me=Object($.a)(),Ae=function(e){Object(d.a)(a,e);var t=ke(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e)).callLoginImageRequest=function(){var e=oe.a;fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.data.images,a=e.data.quotes,n=Object(V.a)(0,t.length-1),o=Object(V.a)(0,a.length-1);i.setState({loginImages:t,loginImage:t[n],loginQuotes:a,loginQuote:a[o],isKilled:!1},(function(){i.openModal()}))}))},i.getSignUpTestimonial=function(){var e="".concat(Le,"testimonial/getForSignUp");return Object(X.a)({url:e,method:"GET",body:{},onSuccess:function(e){"SUCCESS"===e.status&&i.setSignUpTestimonial(e.data||{})},onFailure:function(){return{}}})},i.getMaldivesTestimonial=function(){var e=oe.b;return fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.data&&e.data[Object(V.a)(0,5)];i.setSignUpTestimonial(t)}))},i.setSignUpTestimonial=function(e){var t=e.coverImage,a=e.shortestReview,n=void 0===a?"":a,o=e.destination,r=void 0===o?"":o,s=e.ttype,l=void 0===s?"":s,c=e.fName,d=void 0===c?"":c;i.setState({isKilled:!1,loginImage:Object(H.a)(t,"w=520&h=1200&fit=facearea&facepad=10&auto=enhance"),tripText:n,place:l+" TRIP TO "+r,fName:d})},i.navigateExactPath=function(e,t){var a=i.props,n=a.lastLocation,o=a.history,r=a.match,s=a.app,l=a.location,c=a.packages,d=a.hotelDetails,u=s.itineraryInfo.itinerary,p=void 0===u?{}:u,g=i.state,m=g.isMaldives,h=g.maldivesData,b=g.landingPageUrl,f=g.pytDealsData;if(m){var v=l.search?"".concat(b||ie.gb.LANDING_ROUTE,"/listing/").concat(e).concat(l.search):l.pathname.replace("signup"===e?"login":"signup",e);o.push(v,{isMaldives:m,maldivesData:h})}else if(f)o.replace({pathname:t,search:i.props.queryParams||"",state:{pytDealsData:f,goback:(o.location.state||{}).goback}});else if(n&&(Object(G.a)(n.pathname,["get-cost"])||r.params.itineraryId)){var y=Object(ie.Nb)({itineraryId:r.params.itineraryId,regionCode:r.params.searchRegion,target:"signup"===e?ie.yb:ie.fb,location:l});(d&&d.content||p&&p.campaign||c&&c.content)&&(y=Object(ie.Lb)({pathname:o.location.pathname,itineraryId:r.params.itineraryId,target:e})),o.replace(y)}else t?o.replace({pathname:t,search:i.props.queryParams||""}):o.replace("/".concat(e))},i.alreadyAccountHandler=function(e){e.preventDefault(),i.navigateExactPath("login",i.props.loginRouteURL)},i.getDestinationCreateItinerary=function(e){return Object(re.a)()?i.props.actions.createMleItinerary:e.regionCode?i.props.actions.createPDGDestinationItinerary:i.props.actions.createMleItinerary},i.triggerCounter=function(){var e,t=20;i.setState({resendDisable:!1}),e=setInterval((function(){0!==t?(t-=1,i.setState({counter:t})):(i.setState({counter:20,resendDisable:!0}),clearInterval(e))}),1e3)},i.triggerMobileOTP=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=i.state,a=t.countryPhoneCode,n=t.mobileNumber,s=t.name,l=t.showName,c=i.props,d=c.lastLocation,u=c.app,p=c.match,g=c.location,m=u.itineraryInfo,h=void 0===m?{}:m;i.setState({otp:"",otpError:{error:!1,status:"",message:""}});var b={is_logged_in:!1,leadSource:Object(ae.b)({history:history,lastLocation:d,location:g}),ipAddress:sessionStorage.getItem("ipaddress")||"",regionCode:(Object(N.a)(h)?p.params.searchRegion:null===h||void 0===h?void 0:h.itinerary.regionCode)||"region",mobileNumber:n,countryPhoneCode:"+91"};e?Object(ne.he)(ne.Zc,b):s?Object(ne.he)(ne.Rb,b):Object(ne.he)(ne.rc,b);var f={countryPhoneCode:a,mobileNumber:"".concat(n),name:l?s:void 0};Object(Te.e)({reqObj:f}).then(function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.data.name?i.setState({showLanguageScreen:!t.data.preferredLanguage,showOTPScreen:!!t.data.preferredLanguage,otpResponseObj:t.data,showGlobalError:!1}):"+91"===a?i.setState({inputLoading:!0,showName:!0,otpResponseObj:t.data,showGlobalError:!1}):i.setState({showName:!1,showGlobalError:!0,otpResponseObj:t.data});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},i.onChooseLanguage=function(e){Object(ne.he)(ne.K,{language:e}),i.setState({preferredLanguage:e,showLanguageScreen:!1,showOTPScreen:!0},(function(){i.triggerCounter()}))},i.triggerMobileVerifyOTP=function(){var e=i.state,t=e.mobileNumber,a=e.name,o=e.otp,r=e.otpResponseObj,s=void 0===r?{}:r,l=e.preferredLanguage,c=i.props,d=c.history,u=c.lastLocation,p=Object(ae.b)({history:d,lastLocation:u}),g=Object(n.a)(Object(n.a)({},s),{},{mobileNumber:t,name:a||(null===s||void 0===s?void 0:s.name),userName:a||(null===s||void 0===s?void 0:s.userName),otp:o,canSendWhatsAppMessages:!0,preferredLanguage:l||null,leadSource:p});Object(Te.f)({reqObj:g,prodType:null===p||void 0===p?void 0:p.prodType,history:d}).then((function(e){console.log({res:e});var t=e.status,a=e.message;"VERIFIED"===t?i.onSignUpOrLogInSuccess():i.setState({otpError:{error:!0,status:t,message:a}})})).catch((function(e){var t=e.status,a=e.message;i.setState({otpError:{error:!0,status:t,message:a}})}))},i.getCostingConfigDubai=function(e){var t=i.props.app.user_details;if(!e&&t&&t.loggedIn)return i.getCostingConfiguration();var a=Object(le.a)(),n=i.props,o=n.history,r=n.lastLocation,s=Object(ae.b)({history:o,lastLocation:r,rc:"dxb"}),l={cities:[20],minDays:parseInt(a.min),maxDays:parseInt(a.max),region:"dxb",tripType:a.type,attractionIds:c,preferredMonth:a.month},c=a.ids.split(","),d=Object(ce.a)(a.rooms),u="".concat(a.date.length>1?a.date:"0"+a.date,"/").concat(a.month[0].toUpperCase()).concat(a.month.toLowerCase().substr(1,2),"/").concat(a.year);if(e)return{minDays:parseInt(a.min),maxDays:parseInt(a.max),month:a.month,type:a.type,attractionIds:c,hotelGuestRoomConfigurations:d,flightsBookedByUserAlready:!1,departureAirport:a.dep,departureDate:u,leadSource:s};var p={creationData:l,costingData:{flightsBookedByUserAlready:!1,costingConfig:{hotelGuestRoomConfigurations:d,departureAirport:a.dep,arrivalAirport:"$$$",departureDate:u}}};return s&&"object"===typeof s&&(p.costingData.leadSource=s),p},i.triggerMultipleEvents=function(e){e.forEach((function(e){Object(ne.he)(e.event,e.eventProps)}))},i.beforeCostingFunction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];e?i.triggerMultipleEvents(n):i.props.actions.getUserDetails(t,a,n)},i.onSignUpOrLogInSuccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=i.state,o=i.props,r=o.actions,s=o.lastLocation,l=o.history,c=o.match,d=o.app,u=o.packages,p=o.hotelDetails,g=o.router,m=o.isPytDeals,h=(d||{}).itineraryInfo||{},b=h.itinerary,f=void 0===b?{}:b,v=c.params,y=v.itineraryId,O=v.hotelSlug,S=g||{},I=S.location,C=void 0===I?{}:I,E=u||{},T=E.content,P=void 0===T?{}:T,j=P||{},x=j.campaignDetails,R=void 0===x?{}:x,D=(Object(N.a)(d.itineraryInfo)?c.params.searchRegion:f.regionCode)||"region",k=Object(ae.b)({history:l,lastLocation:s,rc:D});if(e&&window.sessionStorage.setItem("USER_HASH_DATA",e.data),("SUCCESS"===e.status&&"User Created"===e.message||t)&&(i.props.location.pathname.includes(ue.a.DUBAI_SIGNUP)?i.props.actions.createDubaiItinerary(i.getCostingConfigDubai(!0),l):t||i.closeModal()),"INVALID_EMAIL"===e.status)a.validationState.emailAlreadyExist=e.message,a.isLoading=!1,a.disabledSignupButton=!1,i.setState(a);else if("MOBILE_EXISTS"===e.status||"EMAIL_EXISTS"===e.status){var L={};if(i.state.isDubai){var M=i.getCostingConfigDubai();M.creationData?L=M:L.costingConfig=M}else i.state.isPytDeals?L.costingConfig=l.location.state.pytDealsData:L.costingConfig=i.getCostingConfiguration();if(L.costingConfig||!Object.keys(L.costingConfig).length||i.state.isPytDeals)a.actionType="LOGIN",a.headerText="Account exists!",a.subText=e.message,a.isLoading=!1,a.disabledSignupButton=!1,a.errorStatus=e.status,i.setState(a);else{var A=Object(n.a)({itineraryId:y,costingType:"RECOST"},L),U=Object(pe.a)(i.props,"location.state.customPath")||"",_={errorMessage:e.message};if("MOBILE_EXISTS"===e.status){var F,B=null!==(F=a.mobileNumber)&&void 0!==F&&F.startsWith("+")?a.mobileNumber.replace(/\D/g,"").substr(a.countryPhoneCode.replace("+","").length):a.mobileNumber;_=Object(n.a)(Object(n.a)({},_),{},{defaulMobileNumber:B,defaultCountryPhoneCode:a.countryPhoneCode})}else _=Object(n.a)(Object(n.a)({},_),{},{defaultEmail:a.email});r.showLoginForm({requestPayload:A,regionCode:D,history:l,preState:_,campaign:u&&u.content||p&&p.content||f&&f.campaign,customPath:U,pytDeals:m})}}else i.setState({isLoading:!!i.state.isMaldives},(function(){var a=i.getCostingConfiguration,n=a.departureAirport,o=a.departureDate,u=a.hotelGuestRoomConfigurations,p=void 0===u?{}:u;i.state.isMaldives||i.beforeCostingFunction(t,{prod_type:k.prodType},i.state.isMaldives?null:c.params.itineraryId?ne.ae:ne.Zd,c.params.itineraryId?[{event:ne.ic,eventProps:{already_signedin:!1,departure_city:n,fromURL:document.referrer,departure_date:new Date(o),region_name:"packages"===(C.pathname||"").split("/")[1]||"vacations"===(C.pathname||"").split("/")[1]?(R.key||"").split("/")[1]:f.regionName,region_code:D||"region",room_count:p.length,adult_count:Object(w.a)(p,"adultCount")||0,child_count:Object(w.a)(p,(function(e){return e.childAges&&(e.childAges||[]).length}))||0,prod_type:k.prodType}}]:[]);var g=i.getDestinationCreateItinerary(i.state.maldivesData);if(i.state.isMaldives){var h=Object(pe.a)(i.state.maldivesData,"regionCode")||"mle";g(i.state.maldivesData,(function(e){if(i.beforeCostingFunction(t,{prod_type:k.prodType},ne.ae),O||Me)l.push("/customize/".concat(h,"/inclusions/").concat(e));else{i.closeModal();var a="/customize/".concat(h,"/inclusions/").concat(e),n=Object(fe.a)(a,"_blank");n&&!n.closed&&"undefined"!=typeof n.closed||l.push(a)}}),(function(){i.beforeCostingFunction(t),swal("Oh no \ud83d\ude15 Something went wrong!","Please try again.")}),l,s)}else if(m){var b=l&&l.location.state||{},v=b.pytDealsData;b.goback?Object(ye.b)():Object(me.a)({history:l,lastLocation:s,costingConfig:v})}else!i.isItineraryView&&y?Object(X.a)({url:"".concat(Le,"itinerary/campaign/").concat(y,"/assignUser"),method:"POST",body:{leadSource:Object(ae.b)({history:l,lastLocation:s,rc:D})},onSuccess:function(e){r.getCost({itineraryId:e.data,regionCode:D,req_data:Object.assign(i.props.app.getCostUpdatedObject,{itineraryId:e.data}),history:l,lastLocation:s,campaign:!0})},onFailure:function(){}}):c.params.itineraryId?r.getCost({itineraryId:y,regionCode:D,req_data:d.getCostUpdatedObject,history:l,lastLocation:s}):"VERIFIED"===e.status&&"User created"===e.message&&i.closeModal()}))},i.changeOTPstatusInState=function(e){var t=e.type,a=e.response,o=i.state;switch(t){case"GET_OTP_FAILED":switch(a.status){case"VERIFICATIONFAILED":o.isLoading=!1,o.profileNotFound=!0,o.forgetPasswordResponse=a.statusMessage}break;case"GET_OTP_SUCCESS":i.canValidate=!1,o.OTPResponseId=a.id,o.isLoading=!1,"OTP"===o.actionType&&(o.actionType="FORGOT",o.headerText="Received your OTP?",o.subText="Enter the code you received to proceed further",o.OTPResponse=a.statusMessage)}i.setState(Object(n.a)({},o))},i.getOTP=function(e){var t=e,a="".concat(Le,"user/forgetpassword");Object(X.a)({url:a,method:"POST",body:t,onSuccess:function(e){e&&"SUCCESS"===e.status?e.data&&"VERIFICATIONFAILED"===e.data.status?i.changeOTPstatusInState({type:"GET_OTP_FAILED",response:e.data}):i.changeOTPstatusInState({type:"GET_OTP_SUCCESS",response:e.data}):i.changeOTPstatusInState({type:"GET_OTP_ERROR",response:{message:"Failed to get user details"}})},onFailure:function(e){i.changeOTPstatusInState({type:"GET_OTP_ERROR",response:e})}})},i.inputLoginHandler=function(){i.getInstance((function(){i.setState({isLoading:!1},(function(){i.canValidate&&i.triggerValidation()}))}))},i.inputSignupHandler=function(){i.getInstance((function(){var e=i.state;i.setState({isLoading:!1,showGlobalError:!1},(function(){var t=i.state,a=t.validationState,n=t.signUpValidation;if(i.canValidate){var o=e.userName,r=e.email,s=e.mobileNumber,l=e.countryPhoneCode,c=!Object(te.d)(r),d=!Object(W.a)(o),u=!s||!Object(Y.a)((""+s).includes("+")?s:"".concat(l).concat(s));o.trim().length?d?(a.isUserNameValid=!0,n.userNameResponse="Special characters not allowed"):a.isUserNameValid=!1:a.isUserNameValid=!0,r?c?(a.emailInvalid=!0,n.emailResponse="Entered email is not valid"):a.emailInvalid=!1:a.emailInvalid=!0,["","in","ae"].includes(i.state.locale)||s?s.length<4?a.mobileNumberInvalid=!0:u?(a.mobileNumberInvalid=!0,n.mobileNumberResponse="Entered mobile number is not valid"):a.mobileNumberInvalid=!1:a.mobileNumberInvalid=!1,i.setState({isLoading:!1,validationState:a})}}))}),!1)},i.onSwipeEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(c.a)(i),a=i.state.positionY,n=0,o=!1;Math.round(a/window.innerHeight*100)>20||e?(o=!0,n=window.innerHeight-a):n-=a;var r=e?400:200,s=document.getElementById("login-container");s&&Object(B.a)({duration:r,timing:function(e){return-n*Math.cos(e/r*(Math.PI/2))+n+a},execute:function(e){e>0&&(s.style.top=e+"px")},end:function(){o&&!0!==e&&t.closeModal()}}),i.setState({positionY:0})},i.toggleWhatsAppCheckBox=function(){i.setState({canSendWhatsAppMessages:!i.state.canSendWhatsAppMessages})};var l=e.location.state||{},d=l.isMaldives,u=void 0!==d&&d,p=l.maldivesData,g=void 0===p?{}:p,b=l.pytDealsData,f=!!u||e.lastLocation&&e.lastLocation.pathname.indexOf(ie.gb.MALDIVES_SLUG_KEY)>-1;!Object(F.a)()&&sessionStorage&&"true"!==sessionStorage.getItem("isFromMaldivesRoute")&&sessionStorage.setItem("isFromMaldivesRoute",f?"true":"false");var v=Object(re.a)(),y=e.isSmmMobile,O=e.location.state||{},S=O.defaulMobileNumber,I=void 0===S?"":S,C=O.defaultEmail,E=O.alreadyExist,T=O.defaultName,P=void 0===T?"":T,j=O.emailAlreadyExist,x=j?{emailAlreadyExist:j}:{};return i.state={countryPhoneCode:"+91",mobileNumber:I||"",identifier:"",password:"",otp:"",email:C||"",userName:P||"",isKilled:!0,showModal:!1,profileNotFound:!1,forgetPasswordResponse:"",OTPResponse:"",OTPResponseId:"",locale:e.locale?e.locale:!Object(F.a)()&&sessionStorage&&sessionStorage.getItem("locale"),alreadyExist:E,headerText:y||E?"Account exists":v?"Sign in to unlock the best deals!":e.headerText||h.a.createElement(m.Fragment,null,"Welcome to ",h.a.createElement("span",{className:"logo-txt"},"Pickyourtrail")),subText:y?"This email ID already exists. Try using a different one":v?"CRED deal is applicable only till April 30, 2020":e.subText||"Create and customize itineraries catering to your best interests",isLoading:!1,loginError:!1,loginErrorResponse:"",loginImages:[],loginQuotes:[],loginImage:"",loginQuote:"",validationState:Object(n.a)({mobileNumberInvalid:!1,otpInvalid:!1,passwordInvalid:!1},x),signUpValidation:{emailResponse:"",mobileNumberResponse:"",userNameResponse:""},actionType:e.actionType||"LOGIN",isDubai:e.dubai,isPytDeals:e.isPytDeals,pytDealsData:b,isMaldives:u,maldivesData:g,landingPageUrl:g?g.landingPageUrl:"/maldives-tour-packages",canSendWhatsAppMessages:!e.locale,hideWhatsAppUpdate:e.locale,name:"",showName:!1,showGlobalError:!1,showLanguageScreen:!1,showOTPScreen:!1,inputLoading:!1,resendDisable:!1,counter:20,otpResponseObj:{}},i.canValidate=!1,i.openModal=i.openModal.bind(Object(c.a)(i)),i.closeModal=i.closeModal.bind(Object(c.a)(i)),i.clearErrorValidation=i.clearErrorValidation.bind(Object(c.a)(i)),i.triggerValidation=i.triggerValidation.bind(Object(c.a)(i)),i.handleKeyUp=i.handleKeyUp.bind(Object(c.a)(i)),i.setActionProperties=i.setActionProperties.bind(Object(c.a)(i)),i.onSwipeMove=i.onSwipeMove.bind(Object(c.a)(i)),i.onSwipeEnd=i.onSwipeEnd.bind(Object(c.a)(i)),i.getCostingConfiguration=i.getCostingConfiguration.bind(Object(c.a)(i)),i.setSignUp=i.setSignUp.bind(Object(c.a)(i)),i.getOTPClickHandler=i.getOTPClickHandler.bind(Object(c.a)(i)),i.triggerLogin=i.triggerLogin.bind(Object(c.a)(i)),i.triggerSignup=i.triggerSignup.bind(Object(c.a)(i)),i.identifierInstance=h.a.createRef(),i.passwordInstance=h.a.createRef(),i.nameInstance=h.a.createRef(),i.mobileInstance=h.a.createRef(),i.emailInstance=h.a.createRef(),i.otpInstance=h.a.createRef(),i.isItineraryView=Object(G.a)(i.props.location.pathname,["/view/","/inclusions/"]),i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){Object(Q.a)(),this.state.countryPhoneCode||this.setState({countryPhoneCode:"+91"});var e=this.props,t=e.app,a=e.history,i=e.location,o=this.state.isItineraryPage,r=Object(re.a)();if("SIGNUP"===this.state.actionType?(this.setState({headerText:r?"Share your travel plans with us":this.props.headerText,subText:r?"CRED deal is applicable only till April 30, 2020":this.props.subText}),!Object(F.a)()&&sessionStorage&&"true"===sessionStorage.getItem("isFromMaldivesRoute")?this.getMaldivesTestimonial():this.getSignUpTestimonial()):this.callLoginImageRequest(),i.state&&i.state.mobile_number){var s=this.state;s.mobileNumber=i.state.mobile_number,i.state.errorMessage?(s.headerText="Account exists",s.subText=i.state.errorMessage):(s.headerText="Welcome back!",s.subText="Looks like you have an account created with this mobile number. Please login to calculate the trip cost."),this.setState(s),this.openModal(o)}else if(Object(G.a)(i.pathname,["/signup","/login"],-1)||Object.keys(t.getCostUpdatedObject).length)this.openModal(o);else{var l=i.pathname;l.replace("/login",""),l.replace("/signup",""),a.replace(l)}if("SIGNUP"===this.state.actionType){var c=JSON.parse(localStorage.getItem("callbackDetails"));c&&c.data&&this.setState({userName:c.data.name,email:c.data.email,mobileNumber:c.data.mobileNumber,countryPhoneCode:c.data.countryPhoneCode})}if(document.addEventListener("keyup",this.handleKeyUp),Object.keys(this.state.maldivesData).length>0&&Object(re.a)()){var d=JSON.parse(sessionStorage.getItem("credDealsResort"));this.setState((function(e){return{maldivesData:Object(n.a)(Object(n.a)({},e.maldivesData),{},{roomCode:d.roomTypeCode,mealCode:d.mealCode})}}))}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp),Object(K.a)()}},{key:"componentWillReceiveProps",value:function(e){var t=e.app;if("SIGNUP"!==this.state.actionType||this.state.fName||(!Object(F.a)()&&sessionStorage&&"true"===sessionStorage.getItem("isFromMaldivesRoute")?this.getMaldivesTestimonial():this.getSignUpTestimonial()),t&&t.action){var a=this.state;switch(t.action){case"LOGIN_ERROR":a.loginError=!0,a.loginErrorResponse=t.response;break;case"GET_OTP_FAILED":switch(t.response.status){case"VERIFICATIONFAILED":a.isLoading=!1,a.profileNotFound=!0,a.forgetPasswordResponse=t.response.statusMessage}break;case"GET_OTP_SUCCESS":this.canValidate=!1,a.OTPResponseId=t.response.id,a.isLoading=!1,"OTP"===a.actionType&&(a.actionType="FORGOT",a.headerText="Received your OTP?",a.subText="Enter the code you received to proceed further")}this.setState(Object(n.a)({},a))}}},{key:"openModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({isKilled:!this.state.loginImage||!1,isItineraryView:t},(function(){setTimeout((function(){e.setState({showModal:!0})}),10),Object(_.a)()}))}},{key:"setSignUp",value:function(){this.navigateExactPath("signup",this.props.signupRouteURL)}},{key:"closeModal",value:function(){var e=this.props,t=e.history,a=e.lastLocation,n=e.match,i=e.location,o=e.hotelDetails,r=e.packages,s=e.app,l=e.isSmmMobile,c=e.isPytDeals;"LOGIN"===this.state.actionType&&l&&Object(ne.he)(ne.od,{clicked:!0}),sessionStorage&&sessionStorage.setItem("isFromMaldivesRoute","false");var d=(a||{}).pathname||"",u=this.state,p=u.isMaldives,g=u.landingPageUrl,m=d.includes("packages");this.setState({showModal:!1},(function(){setTimeout((function(){if(l&&Me){var e=t.location.pathname,u=n.params.itineraryId;e=(e=(e=e.replace("/"+u+"/","")).replace("signup","")).replace("login",""),t.push(e)}else if(p){var h=d.split("/")[1];i.search?t.push("".concat(g||ie.gb.LANDING_ROUTE,"/listing").concat(i.search)):h?t.push("/".concat(h)):t.push(g||ie.gb.LANDING_ROUTE)}else if(m)t.goBack(),window.location.reload();else if(c){var b=t.location.pathname;if((t.location.state||{}).goback)t.goBack();else{var f=b.includes("/get-cost/login"),v=Me?"".concat(f?"/login":"/signup"):"/get-cost".concat(f?"/login":"/signup");if(b.includes(v)){localStorage.removeItem("bookNowClicked");var y=b.replace(v,"");t.replace(y)}else t.goBack()}}else if(Object(G.a)(d,["your-vacations","yourtrips","account"]))window.location="/";else if(n.params.itineraryId){if(o&&o.content||r&&r.content||Object(pe.a)(s.itineraryInfo,"itinerary.campaign",!1)){var O=Object(z.a)(i.pathname);t.push("/"+O)}else t.push(Object(ie.Nb)({itineraryId:n.params.itineraryId,regionCode:n.params.searchRegion,location:i}))}else if(!a||a&&"/"===a.pathname){var S,I,C;if(null!==(S=i.search)&&void 0!==S&&S.includes("redirect=source"))null===(I=(C=window.history).back)||void 0===I||I.call(C);else window.location="/"}else t.goBack()}),300)}))}},{key:"handleKeyUp",value:function(e){27===e.keyCode&&this.closeModal()}},{key:"triggerValidation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",a=this.state,n=a.identifier,i=void 0===n?"":n,o=a.password,r=a.actionType,s=a.otp,l=a.validationState,c=a.forgetPasswordResponse,d=a.countryPhoneCode;this.clearErrorValidation();var u=null!==(e=""+i)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email";return"login"===t?(l.identifierInvalid=!("mobile"===u?Y.a:te.d)("".concat("mobile"===u?d:"").concat(i)),l.passwordInvalid=!o.trim().length||l.identifierInvalid,l.loginInvalidResponse="",i.length>3&&o.trim().length&&(l.loginInvalidResponse=l.identifierInvalid?i?"Registered ".concat(u," number is not valid"):"Registered email/mobile number is not valid":""),"FORGOT"===r?l.otpInvalid=!s.trim().length||6!==s.length:"OTP"===r&&(l.identifierInvalid=!("mobile"===u?Y.a:te.d)("".concat("mobile"===u?d:"").concat(i)),c=l.identifierInvalid?i?"Entered ".concat(u," is not valid"):"Entered email/mobile number is not valid":c)):"get_otp"===t&&(l.identifierInvalid=!("mobile"===u?Y.a:te.d)("".concat("mobile"===u?d:"").concat(i)),l.otpInvalid=!1,l.passwordInvalid=!1),this.setState({forgetPasswordResponse:c,validationState:l}),T()(j()(l),(function(e){return!e}))}},{key:"getInstance",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(this.identifierInstance.current||{}).state,n=(this.mobileInstance.current||{}).state,i=(this.passwordInstance.current||{}).state,o=(this.otpInstance.current||{}).state,r=(this.nameInstance.current||{}).state,s=(this.emailInstance.current||{}).state;this.setState({identifier:a?a.identifier:n?n.mobileNumber:"",mobileNumber:n?n.mobileNumber:"",countryPhoneCode:a?a.extensionNumber:n?n.extensionNumber:this.state.countryPhoneCode||"+91",password:i?i.value:"",otp:o?o.value:"",userName:r?r.value:"",email:s?s.value:"",isLoading:t},(function(){e()}))}},{key:"triggerLogin",value:function(e,t){var a=this;if(this.canValidate=!0,e&&e.preventDefault(),t)return Object(ne.he)(ne.P,{element_name:"continue as guest clicked"}),void this.onSignUpOrLogInSuccess({},!0);this.clearErrorValidation(),this.getInstance((function(){a.triggerValidation()?a.setState({isLoading:!0},(function(){var e,t=a.props||{},i=t.app,o=t.hotelDetails,r=t.packages,s=void 0===r?{}:r,l=t.router,c=t.actions,d=t.history,u=t.lastLocation,p=t.match,g=t.isSmmMobile,m=a.state,h=m.identifier,b=m.password,f=m.actionType,v=m.otp,y=m.OTPResponseId,O=m.isDubai,S=m.isMaldives,I=m.maldivesData,C=m.isPytDeals,E=m.countryPhoneCode,T=null!==(e=""+h)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email",P=(s||{}).content,j=((void 0===P?{}:P)||{}).campaignDetails,N=void 0===j?{}:j,x=(i||{}).itineraryInfo,w=void 0===x?{}:x,R=(l||{}).location,D=void 0===R?{}:R,k=(w||{}).itinerary,L=void 0===k?{}:k,M=(!g||!Me)&&(a.isItineraryView||p.params.itineraryId||a.state.isPytDeals),A=Object(n.a)(Object(n.a)({},"mobile"===T?{countryPhoneCode:E,mobileNumber:h}:{email:h}),{},{password:b}),U=i.packages&&Array.isArray(i.packages.filteredItineraries)&&i.packages.filteredItineraries.length||o&&o.content?p.params.itineraryId:!Object(q.a)(i.itineraryInfo)&&i.itineraryInfo.campaignItineraryId?i.itineraryInfo.campaignItineraryId:null;"FORGOT"===f&&(A.otp=v,A.id=y),M?c.login({req_data:A,isItineraryView:!0,isPytDeals:C,itineraryInfo:i.itineraryInfo,getCostObject:C?Object.keys(i.getCostUpdatedObject).length?i.getCostUpdatedObject:(d.location.state||{}).pytDealsData:i.getCostUpdatedObject,history:d,loginType:"USER",location:d.location,lastLocation:u,campaignItineraryId:U,match:p,regionName:"packages"===D.pathname.split("/")[1]||"vacations"===D.pathname.split("/")[1]?(N.key||"").split("/")[1]:L.regionName}).then((function(){a.setState({isLoading:!1,showModal:!1}),!Object(F.a)()&&window.gtag&&window.gtag("event","login",{event_category:"engagement",event_label:"method",value:"0"})})).catch((function(){a.setState({isLoading:!1})})):c.login({req_data:A,isItineraryView:!1,history:d,loginType:"USER",location:D,lastLocation:u,match:p,regionName:"packages"===D.pathname.split("/")[1]||"vacations"===D.pathname.split("/")[1]?(N.key||"").split("/")[1]:L.regionName,isDubai:O,dubaiAction:c.createDubaiItinerary,isMaldives:S,maldivesData:I,isSmmMobile:g&&Me,maldivesAction:a.getDestinationCreateItinerary(I),maldivesErrorHandle:function(){a.setState({isLoading:!1}),swal({title:"Sold out! \ud83d\ude15",animation:!0,html:!0,text:'<h5 class="meta-text">Try exploring other resorts, else Email us at <a href="mailto:speedboat@pickyourtrail.com">speedboat@pickyourtrail.com</a>, we will try our best and check availability for the same resort offline.</h6>',confirmButtonText:"Explore other resorts",closeOnConfirm:!0,closeOnCancel:!0,showCancelButton:!0,cancelButtonText:"Okay, got it"},(function(e){if(e){var t;if(Object(re.a)())t="/cred-offers";else{var a=I.departureDate,i=I.nights,o=I.passengerConfiguration,r=I.arrivalAirport;t=Object(de.a)(Object(n.a)(Object(n.a)({},I),{},{airportCode:r,date:a,stayDuration:i,paxDetails:o}),!1,I.listingPageUrl?I.listingPageUrl:ie.gb.LISTING_ROUTE)}d&&d.push(t)}}))},closeModal:a.closeModal}).then((function(){a.setState({isLoading:!1,showModal:!1}),!Object(F.a)()&&window.gtag&&window.gtag("event","login",{event_category:"engagement",event_label:"method",value:"0"})})).catch((function(){a.setState({isLoading:!1})}))})):a.setState({isLoading:!1})}))}},{key:"triggerSignup",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.preventDefault(),this.canValidate=!0,a)return Object(ne.he)(ne.P,{element_name:"continue as guest clicked"}),void this.onSignUpOrLogInSuccess({},!0);Object(ne.he)(ne.U,{element_name:"new account clicked"}),this.state.disabledSignupButton||this.setState({disabledSignupButton:!0},(function(){t.getInstance((function(){t.validateSignUpForm()}))}))}},{key:"getCostingConfiguration",value:function(){var e=this.props.app.user_details,t=this.props.app.getCostUpdatedObject.costingConfig,a=Object(x.a)(t,["bookingPlan_Text","departureAirport_Text"]);return e&&e.loggedIn&&"ADMIN"===e.userType&&"2"===a.tripStage&&(a.tripStage="4"),a}},{key:"validateSignUpForm",value:function(){var e,t,a,n=this,i=this.state;this.inputSignupHandler();var o=i.userName,r=i.email,s=i.mobileNumber,l=i.countryPhoneCode,c=i.canSendWhatsAppMessages,d=i.locale,u=""!==r.trim()&&Object(te.d)(r),p=!["","in","ae"].includes(d)&&!s||Object(Y.a)(null!==(e=""+s)&&void 0!==e&&e.includes("+")?s:"".concat(l).concat(s)),g=""!==o.trim(),m=i.validationState;m.mobileNumberInvalid=!p,m.emailInvalid=!u,m.isUserNameValid=!g;var h=this.props,b=h.location,f=h.lastLocation,v=h.history,y=h.match,O=h.app,S=O.itineraryInfo,I=S.itinerary,C=void 0===I?{}:I,E=S.version,T=y.params.itineraryId,P=(Object(N.a)(O.itineraryInfo)?null!==b&&void 0!==b&&null!==(t=b.state)&&void 0!==t&&t.isMaldives?"mle":y.params.searchRegion:C.regionCode)||"region",j=Object(ae.b)({history:v,lastLocation:f,rc:P,version:E||null!==b&&void 0!==b&&null!==(a=b.state)&&void 0!==a&&a.isMaldives?"SPEEDBOAT":""});this.setState(m,(function(){if(u&&p&&g){var e="".concat(Le,"user/signup/verifyotp");T||n.props.location.state&&n.props.location.state.isMaldives||(e="".concat(Le,"user/homePage/signup"));var t={mobileNumber:s,userName:o,email:r,countryPhoneCode:l,leadSource:j,cpid:sessionStorage.getItem("campaignId"),canSendWhatsAppMessages:c};Object(X.a)({url:e,method:"POST",body:t,onSuccess:function(e){e&&n.onSignUpOrLogInSuccess(e)},onFailure:function(e){if(!e.response)return null;e.response&&409===e.response.status?("Mobile number already exists"===e.response.data?(i.actionType="LOGIN",i.headerText="Welcome back!",i.subText="Looks like you have an account created with this mobile number. Please login with your details",i.isLoading=!1):"Email id already exists"===e.response.data&&(i.validationState.emailAlreadyExist="This email ID already exists. Kindly login with your username and password",i.isLoading=!1),i.disabledSignupButton=!1,n.setState(i)):e.response&&e.response.status}})}else n.setState({isLoading:!1,disabledSignupButton:!1})}))}},{key:"clearErrorValidation",value:function(e){e&&e.preventDefault();var t=this.state.validationState;t.mobileNumberInvalid=!1,t.passwordInvalid=!1,t.emailAlreadyExist="",t.isUserNameValid=!1,t.emailInvalid="",t.loginInvalidResponse="",this.setState({forgetPasswordResponse:"",profileNotFound:!1,loginError:!1,loginErrorResponse:"",validationState:t,signUpValidation:{emailResponse:"",mobileNumberResponse:"",userNameResponse:""}})}},{key:"getOTPClickHandler",value:function(e){var t=this;e&&e.preventDefault(),this.canValidate=!0;this.getInstance((function(){if(t.triggerValidation("get_otp")){var e,a=t.state,n=a.countryPhoneCode,i=a.identifier,o=null!==(e=""+i)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email";t.getOTP("mobile"===o?{countryPhoneCode:n,mobileNumber:i}:{email:i})}else t.setState({isLoading:!1})}))}},{key:"onSwipeMove",value:function(e){var t=document.getElementById("login-container");this.setState({positionY:e.y}),t&&e.y>0&&(t.style.top=e.y+"px")}},{key:"setActionProperties",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOGIN",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Welcome back!",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Create an account to personalize and save your itineraries.";this.canValidate=!1,this.setState({actionType:t,headerText:a,subText:n,isLoading:!1},(function(){e.clearErrorValidation()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showModal,n=t.isKilled,i=t.forgetPasswordResponse,o=t.profileNotFound,r=t.headerText,s=t.mobileNumber,l=t.countryPhoneCode,c=t.subText,d=t.loginError,u=t.loginErrorResponse,p=t.validationState,g=t.actionType,f=t.isLoading,v=t.loginImage,y=t.signUpValidation,O=t.disabledSignupButton,S=t.userName,I=t.email,E=t.canSendWhatsAppMessages,T=t.locale,P=t.OTPResponse,j=t.hideWhatsAppUpdate,N=t.alreadyExist,x=t.errorStatus,w=t.identifier,R=this.props,D=R.nameLabel,k=R.emailLabel,L=R.submitButtonText,M=R.footerLinkText,A=R.history,_=Object(G.a)((this.props.lastLocation||{}).pathname,["get-cost"])&&(this.props.app.regionStatus||{}).regionName;return!n||this.props.isTestKilled||Me?h.a.createElement(m.Fragment,null,h.a.createElement("div",{className:C()("modal fade modal-sticky-header modal-touch-header primary-popups parent-close",{slideUp:Object(U.a)(),in:a&&v,"costing-popup":_&&!Object(U.a)()}),tabIndex:-1},h.a.createElement("div",{className:"modal-dialog",id:"login-container"},h.a.createElement("div",{className:"modal-content with-header"},h.a.createElement(J.a,{onSwipeMove:this.onSwipeMove,onSwipeEnd:this.onSwipeEnd},h.a.createElement("div",{id:"tab-btn",className:"modal-header touch-header","data-dismiss":"modal"},h.a.createElement(b.a,{buttonClass:"tap-btn",onClickAction:function(t){t&&t.preventDefault()&&t.stopPropagation(),e.onSwipeEnd(!0)}}))),h.a.createElement("div",{className:"modal-body"},h.a.createElement("div",{className:"inner-content"},(this.state.showOTPScreen||this.state.showLanguageScreen)&&Me?null:h.a.createElement(Ie.a.Item,{height:"100%",width:Me?"calc(100% + 32px)":"45%",marginTop:Me?-60:0,marginLeft:Me?-16:0,paddingBottom:Me?24:0},h.a.createElement("img",{src:Me?"https://oceanjar-new.s3.ap-south-1.amazonaws.com/gcm-mobile-header.png":"https://oceanjar-new.s3.ap-south-1.amazonaws.com/gcm-leftside.png",alt:"left-side banner"})),h.a.createElement(Fe,Object.assign({headerText:r,history:A,email:I,userName:S,mobileNumber:w||s,countryPhoneCode:l,subText:c,nameLabel:D,emailLabel:k,loginError:d,loginErrorResponse:u,validationState:p,actionType:g,profileNotFound:o,forgetPasswordResponse:i,OTPResponse:P,isLoading:f,nameInstance:this.nameInstance,emailInstance:this.emailInstance,triggerCloseModal:this.closeModal,triggerLogin:this.triggerLogin,triggerSignup:this.triggerSignup,onChooseLanguage:this.onChooseLanguage,triggerOTP:this.getOTPClickHandler,identifierInstance:this.identifierInstance,mobileInstance:this.mobileInstance,passwordInstance:this.passwordInstance,otpInstance:this.otpInstance,loginChangeCall:this.inputLoginHandler,signUpChangeCall:this.inputSignupHandler,setSignUp:this.setSignUp,setLogin:this.alreadyAccountHandler,disabledSignupButton:O,signUpValidation:y,submitButtonText:L,footerLinkText:M,toggleWhatsAppCheckBox:this.toggleWhatsAppCheckBox,canSendWhatsAppMessages:E,hideWhatsAppUpdate:j,setForgot:function(){e.setActionProperties("OTP","Retrieve Password","Enter your email/mobile number")},alreadyExist:N,errorStatus:x,locale:T,triggerMobileOTP:this.triggerMobileOTP,triggerMobileVerifyOTP:this.triggerMobileVerifyOTP,setShowName:function(){return e.setState({showName:!1})},setName:function(t){return e.setState({name:t})},onOTPEdit:function(){for(var t=window.setInterval((function(){}),Number.MAX_SAFE_INTEGER),a=1;a<t;a++)window.clearInterval(a);e.setState({counter:20,showOTPScreen:!1,showName:!1})},onOTPChange:function(t){e.setState({otp:t})}},this.state)))))))):null}}]),a}(m.Component),Ue=function(){return h.a.createElement("div",{className:"modal-backdrop fade in"})},_e=function(e){return h.a.createElement("aside",{style:{backgroundImage:"url("+Object(H.a)(e.image)+")"}})},Fe=function(e){var t=e.triggerCloseModal,a=e.history,n=e.actionType,i=e.showOTPScreen,o=e.showName,r=e.locale,s=e.showLanguageScreen,l=r&&"in"!==r,c=(a.location.state||{}).noteMessage;return h.a.createElement("div",{className:"right-content",style:s?{paddingBottom:"24px"}:{}},h.a.createElement("div",{className:"top-btns hidden-xs"},h.a.createElement(b.a,{buttonClass:"pull-right btn btn-link",onClickAction:t},h.a.createElement(Pe.a,{width:18,height:18}))),!i&&!l&&!s&&h.a.createElement(He,{showName:o,locale:r}),h.a.createElement("form",{className:"clearfix fw",action:"#"},h.a.createElement(Ve,e),l&&h.a.createElement(We,e)),c&&!["OTP","FORGOT"].includes(n)?h.a.createElement("div",{style:{fontSize:"13px",lineHeight:"20px",color:"#BF364A",textAlign:"center"}},c):null)},Be=Object(g.default)(je.a).withConfig({displayName:"Login___StyledEditBox"})({paddingLeft:"$1",fill:"$grey12",cursor:"pointer"}),Ge=Object(g.default)(je.a).withConfig({displayName:"Login___StyledEditBox2"})({paddingLeft:"$1",fill:"$grey12",cursor:"pointer"}),Ve=function(e){var t,a,n=e.identifierInstance,i=e.mobileInstance,o=e.passwordInstance,r=e.validationState,s=e.loginError,l=e.loginErrorResponse,c=e.actionType,d=e.nameLabel,u=e.nameInstance,p=e.setForgot,g=e.profileNotFound,O=e.otpInstance,S=e.forgetPasswordResponse,I=e.OTPResponse,C=e.triggerOTP,E=e.mobileNumber,T=void 0===E?"":E,P=e.countryPhoneCode,j=void 0===P?"+91":P,x=e.loginChangeCall,w=e.signUpChangeCall,R=e.signUpValidation,D=e.email,k=e.history,L=e.errorStatus,M=e.showName,A=e.triggerMobileOTP,U=e.setShowName,_=e.name,F=e.setName,B=e.showOTPScreen,G=e.onOTPEdit,V=e.otp,W=e.onOTPChange,H=e.otpError,z=e.resendDisable,q=e.counter,K=e.triggerMobileVerifyOTP,Q=e.showGlobalError,X=e.showLanguageScreen,Z=e.preferredLanguage,J=e.onChooseLanguage,ee=k.location.state||{},te=ee.disableMobileNumber,ae=ee.pytDealsData,ie="MOBILE_EXISTS"===L?"":D||(null!==(t=""+T)&&void 0!==t&&t.match(/^\d+$/)?"":T),oe=!(null===(a=""+T)||void 0===a||!a.match(/^\d+$/));switch(c){case"SIGNUP":return h.a.createElement(h.a.Fragment,null,X?h.a.createElement(Ie.a.Item,null,h.a.createElement(Ie.a.Item,{alignItems:Object($.a)()?"center":"flex-start",paddingBottom:"24px"},h.a.createElement(Ce.a,{fontSize:"13px",lineHeight:"20px",color:"#036D4A",fontWeight:"700",textTransform:"uppercase"},"Before entering OTP..."),h.a.createElement(Ce.a,{fontSize:"24px",lineHeight:"30px",color:"#000",fontWeight:"600",textAlign:Object($.a)()?"center":"left"},"Choose the language you're comfortable talking in.")),h.a.createElement(De.a,{selected:Z,onChange:J})):B?h.a.createElement(Ie.a.Item,{position:"relative"},h.a.createElement(Ie.a.Item,{gap:8,paddingTop:8},h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:24,fontWeight:600,lineHeight:"30.17px",color:"#333"},"Enter OTP"),h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:15,lineHeight:"22px",color:"#5B5B5B"},"+91"===j?"OTP has been sent to your Mobile number":"OTP has been sent to your registered Email"," ")),"+91"===j?h.a.createElement(Ie.a.Item,{flexDirection:"row",gap:6,alignItems:"center",paddingTop:4},h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:15,f:!0,lineHeight:"22px",color:"#5B5B5B"},j," ",T),h.a.createElement(Ee.a,{onPress:G},h.a.createElement(Ge,{width:"15px",height:"15px"}))):null,h.a.createElement(Ie.a.Item,{paddingTop:28,gap:8},h.a.createElement(we.a,{value:V,onChange:W,numInputs:6,isInputNum:!0,shouldAutoFocus:!0,inputStyle:{minHeight:Me?"46px":"48px",width:Me?"42px":"44px",backgroundColor:"#F9F9F9",borderRadius:8,textAlign:"center",border:H.error?"1px solid #D73C54":"1px solid #D8D8D8",fontSize:"20px",fontWeight:600},containerStyle:{display:"flex",justifyContent:"space-between"},focusStyle:{outline:"none",border:"1px solid #09B367",borderRadius:"8px"}}),h.a.createElement(Ie.a,{justifyContent:H.error?"space-between":"flex-end"},H.error&&h.a.createElement(Ie.a,{gutter:4},h.a.createElement(Re.a,{fill:"#D73C54"}),h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:"12px",color:"#D73C54",lineHeight:"15px"},"VERIFICATION_FAILED"===H.status?"Wrong OTP Entered!":H.message||"Wrong OTP Entered!")),z?h.a.createElement(Ee.a,{onPress:function(){return A(!0)}},h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:13,fontWeight:600,color:"#07A55E",textAlign:"end",cursor:"pointer",textDecorationLine:"underline"},"Resend OTP")):h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:13,fontWeight:600,color:"#666666",textAlign:"end",cursor:"not-allowed"},"Resend OTP in ",q)),h.a.createElement(Ie.a.Item,{gap:10,paddingTop:24},h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:13,color:"#535353",lineHeight:"20px"},"By clicking on continue, I agree to receive important information through Whatsapp and SMS."),h.a.createElement(b.a,{styleValues:{height:"48px",borderRadius:"12px"},buttonClass:"btn btn-primary btn-lg btn-block",onClickAction:K,isDisabled:(null===V||void 0===V?void 0:V.length)<6},"Continue")))):h.a.createElement(Ie.a.Item,{paddingTop:"24px"},M?h.a.createElement(h.a.Fragment,null,h.a.createElement(Ie.a.Item,{flexDirection:"row",alignItems:"center",height:53,width:"100%",borderRadius:"12px",backgroundColor:"#F3F3F3",paddingLeft:23,gap:8,marginBottom:12},h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:15,lineHeight:"18.86px",color:"#777777"},"Your Mobile number :"),h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:15,lineHeight:"18.86px",color:"#333333"},j," ",T),h.a.createElement(Ee.a,{onPress:U},h.a.createElement(Be,{width:"15px",height:"15px"}))),h.a.createElement(y.a,{nameField:!0,ref:u,key:"name",defaultValue:_,labelText:d||"Your name",placeHolder:d||"Your name",changeCall:F})):h.a.createElement(v.a,{ref:i,mobileNumber:T,countryPhoneCode:j,extNumber:j,isSignUp:!0,isError:r.mobileNumberInvalid,errorResponse:R.mobileNumberResponse||"Enter your valid mobile number",changeCall:w}),Q?h.a.createElement(Ce.a,{fontSize:12,lineHeight:16,color:"#D73C54",paddingBottom:16},"Need email & name to register for this country code. Please click at the top of"," ",h.a.createElement(Ne.a,{fill:"#D73C54",style:{display:"inline"}})," ","pickyourtrail.com to change country."):null,h.a.createElement(b.a,{buttonClass:"btn btn-primary btn-lg btn-block",styleValues:{height:"48px",borderRadius:"12px"},onClickAction:A,isDisabled:M?!Object(Y.a)(j+T)||Object(N.a)(_):!Object(Y.a)(j+T)||Q},"Get OTP")));case"FORGOT":return h.a.createElement(m.Fragment,null,h.a.createElement(Se.a,{extNumber:j,ref:n,mobileNumber:T,countryPhoneCode:j,isError:r.identifierInvalid,changeCall:x,disabled:!0,errorResponse:"Enter valid email or mobile number"}),h.a.createElement(f.a,{ref:O,isError:s||r.otpInvalid,errorResponse:l||"Please enter valid otp",placeHolder:"Enter OTP",labelText:"Enter OTP",maxLength:6,isOTP:!0,OTPResponse:I,forgotAction:function(){Object(ne.he)(ne.Wd,{forgot_password:!0}),C()},changeCall:x}),h.a.createElement(f.a,{ref:o,isError:r.passwordInvalid,errorResponse:"Please Enter Password",placeHolder:"Set a new password",changeCall:x,labelText:"Set a new password"}));case"OTP":var re;return h.a.createElement(Se.a,{disabled:!(!ae||!te),extNumber:j,ref:n,mobileNumber:ie||T,hideCountryCode:!!ie.length||!oe,countryPhoneCode:j,isError:g||r.identifierInvalid,changeCall:x,errorResponse:S||(T?null!==(re=""+T)&&void 0!==re&&re.match(/[a-z]/i)?"Enter your registered email and click Get OTP":"Enter your registered mobile number and click Get OTP":"Enter your registered email/mobile number and click Get OTP")});default:var se;return h.a.createElement(m.Fragment,null,h.a.createElement(Se.a,{ref:n,mobileNumber:ie||T,countryPhoneCode:j,extNumber:j,placeholderText:"Enter Email/Mobile number",hideCountryCode:!!ie.length||!oe,isError:r.identifierInvalid,errorResponse:R.mobileNumberResponse||T?null!==(se=""+T)&&void 0!==se&&se.match(/[a-z]/i)?"Enter your valid email":"Enter your valid mobile number":"Enter your valid email/mobile number",changeCall:w}),h.a.createElement(f.a,{ref:o,enableForgot:!0,forgotAction:function(){Object(ne.he)(ne.Wd,{forgot_password:!0}),p()},isError:s||r.passwordInvalid,changeCall:x,errorResponse:l||r.loginInvalidResponse||"Enter your registered mobile number and password",placeHolder:"Password",labelText:"Password"}))}},We=function(e){var t=e.triggerLogin,a=e.setSignUp,n=e.actionType,i=e.triggerSignup,o=e.setLogin,r=e.triggerOTP,s=e.isLoading,l=e.disabledSignupButton,c=void 0!==l&&l,d=e.setForgot,u=e.submitButtonText,p=void 0===u?"Create my account":u,g=e.footerLinkText,m=void 0===g?"Already have an account":g,f=e.showContinueAsGuestOption,v=void 0!==f&&f,y=e.history,O="SIGNUP"===n,S="OTP"===n,I=Object(re.a)(),C={direction:["vertical","horizontal"],display:"flex",gutter:Me?["16px"]:["12px"],itemProps:{display:"flex",width:"100%"}};return h.a.createElement("div",{className:"btns-row"},h.a.createElement(Oe.Space,C,!Object(F.a)()&&v?h.a.createElement(b.a,{buttonClass:"btn btn-primary btn-lg btn-block",buttonText:"Continue as guest",onClickAction:O?function(e){return i(e,!0)}:function(e){return t(e,!0)}}):null,h.a.createElement(b.a,{buttonClass:"btn btn-primary btn-lg ".concat(v?"btn-outline":"btn-block"," ").concat(O?"tracker-signup-cta-in-modal":S?"":"tracker-login-cta-in-modal"),buttonText:O?p:S?"Get OTP":"Create my account"!==p?p:"Login",type:"submit",disabledSignupButton:O&&c,onClickAction:O?i:S?r:t,isLoading:s})),["FORGOT","OTP"].includes(n)||O||!Me?null:h.a.createElement("button",{className:"btn btn-link",onClick:function(e){e&&e.preventDefault(),d()},style:{fontWeight:"normal"}},"Forgot password?"),"FORGOT"!==n?h.a.createElement(b.a,{buttonClass:"btn btn-link",buttonText:O?v?"Already have an account":m:I?"Sign up to complete booking":ve.a&&(y.location.state||{}).alreadyExist?"":"Sign up to get free quotes",onClickAction:O?o:a}):null)},He=function(e){var t=e.showName;return h.a.createElement(Ce.a,{fontFamily:"Source Sans Pro",fontSize:Me?22:24,fontWeight:600,lineHeight:Me?"24px":"32px",letterSpacing:"0.2px",color:"#333"},t?"And personalisation starts with your name":"Enter mobile number to personalise your trip")};t.default=Object(ee.withLastLocation)(Object(O.c)((function(e){var t=(e.app||{}).locale;return Object(n.a)(Object(n.a)({},e),{},{locale:t})}),(function(e){return{actions:{login:Object(S.b)(A.a,e),loginWithOTP:Object(S.b)(A.b,e),getUserDetails:Object(S.b)(D.a,e),showLoginForm:Object(S.b)(k.a,e),getCost:Object(S.b)(L.a,e),createMleItinerary:Object(S.b)(M.a,e),createDubaiItinerary:Object(S.b)(se.a,e),createPDGDestinationItinerary:Object(S.b)(ge.a,e),setAssignUserItineraryId:Object(S.b)(he.a,e),getLivePrice:Object(S.b)(be.a,e)}}}))(Ae))},1506:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(38),o=a(39),r=a(58),s=a(46),l=a(56),c=a(29),d=a(0),u=a.n(d),p=a(190),g=a(2166),m=a(623),h=a(1689),b=a(28),f=a(54),v=a(35),y=a.n(v),O=a(2288),S=a.n(O),I=a(15);var C=a(249);function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}var T=I.a.imgix_base,P=function(e){Object(s.a)(a,e);var t=E(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).setRegionStats=function(e){var t=e.regionStatus,a=t.flights,i=t.transfers,o=t.hotels,r=t.activities,s=t.regionName,l=t.image,c=t.content;n.setState({flightsCount:a,transfersCount:i,hotelsCount:o,activitiesCount:r,regionName:s,image:l,content:c})};var o=e.regionStatus,r=o.flights,s=o.transfers,l=o.hotels,c=o.activities,d=o.regionName,u=o.image,p=o.content;return n.state={flightsCount:r,transfersCount:s,hotelsCount:l,activitiesCount:c,regionName:d,image:u,content:p},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setRegionStats(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.regionStatus&&this.setRegionStats(e)}},{key:"render",value:function(){var e=this.state,t=e.flightsCount,a=e.transfersCount,n=e.hotelsCount,i=e.activitiesCount,o=e.regionName,r=e.image,s=e.content;o=o||"";var l,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\'/g,"").split(/(\d+)/)},d=c(t),p=c(a),g=c(n),m=c(i),h="https:"+"".concat(T,"/images/").concat(function(e){if(!e)return!1;if(!e.includes("/"))return e;var t=e.split("/");switch(t.length){case 8:return"".concat(t[3],"/").concat(t[4],"/").concat(t[5],"/").concat(t[6]);case 7:return"".concat(t[3],"/").concat(t[4],"/").concat(t[5]);case 6:return"".concat(t[3],"/").concat(t[4]);case 5:return"".concat(t[3])}}(r),"/").concat(!!(l=r)&&(l.includes("/")?l.substring(l.lastIndexOf("/")+1):l)),b=Object(C.a)();return u.a.createElement("aside",{className:"hidden-xs ".concat(b?"cred_maldives":""),style:{backgroundImage:"url('".concat(h,"')"),color:"".concat(b?"#000000":"")}},u.a.createElement("div",{className:"side-content"},b?u.a.createElement("p",{className:"fine-text semi-bold"},"Price Match Guarantee"):null,u.a.createElement("p",{className:"fine-text light mbottom-medium"},s||"We will get the best prices for your ".concat(o," trip from our trusted\n            travel partners.")),u.a.createElement("ul",{className:"clearfix ".concat(s?"hide":"")},+d[1]?u.a.createElement("li",null,u.a.createElement("span",null,u.a.createElement("i",{className:"pyt-flight-16"}),u.a.createElement(S.a,{start:0,duration:1,end:+d[1],suffix:d[2]})),"Flights"):null,+p[1]?u.a.createElement("li",null,u.a.createElement("span",null,u.a.createElement("i",{className:"pyt-car-16"}),u.a.createElement(S.a,{start:0,duration:1,end:+p[1],suffix:p[2]})),"Transfers"):null,+g[1]?u.a.createElement("li",null,u.a.createElement("span",null,u.a.createElement("i",{className:"pyt-bed-16"}),u.a.createElement(S.a,{start:0,duration:1,end:+g[1],suffix:g[2]})),"Hotels"):null,+m[1]?u.a.createElement("li",null,u.a.createElement("span",null,u.a.createElement("i",{className:"pyt-activities-16"}),u.a.createElement(S.a,{start:0,duration:1,end:+m[1],suffix:m[2]})),"Activities"):null)))}}]),a}(d.Component),j=a(624),N=a.n(j),x=a(625),w=a.n(x),R=a(42),D=a(471),k=a(294),L=a(172),M=a(1631),A=a(292),U=a(1792),_=a(357),F=a(71),B=a(342),G=a(31),V=a(1722),W=a(61),H=a(253),z=a(1938),q=a(22),K=a(217),$=a(1601),Y=a(214),Q=a(20),X=a(346),Z=a(176),J=a(354),ee=a(23),te=a(1723),ae=a.n(te),ne=a(138),ie=a(145),oe=a(93),re=a(14),se=a(7),le=(a(1619),a(1855)),ce=a(1808),de=a(601),ue=a(612),pe=a(1639),ge=a(161),me=a(18),he=a(1856),be=a(185),fe=a(367),ve=a(481),ye=a(260),Oe=a(82),Se=a(659),Ie=a(232),Ce=a(16),Ee=a(2167),Te=a(1332);function Pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(c.a)(e);if(t){var i=Object(c.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(l.a)(this,a)}}a.d(t,"GetBackDropScreen",(function(){return we})),a.d(t,"RenderLeftSidePanel",(function(){return Re})),a.d(t,"RenderRightSidePanel",(function(){return De})),a.d(t,"RenderInsideComponents",(function(){return ke})),a.d(t,"RenderFooterComponent",(function(){return Le})),a.d(t,"RenderHeaderText",(function(){return Me}));var je=I.a.api_url,Ne=Object(Q.a)(),xe=function(e){Object(s.a)(a,e);var t=Pe(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e)).callLoginImageRequest=function(){var e=le.a;fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.data.images,a=e.data.quotes,n=Object(H.a)(0,t.length-1),i=Object(H.a)(0,a.length-1);o.setState({loginImages:t,loginImage:t[n],loginQuotes:a,loginQuote:a[i],isKilled:!1},(function(){o.openModal()}))}))},o.getSignUpTestimonial=function(){var e="".concat(je,"testimonial/getForSignUp");return Object(ee.a)({url:e,method:"GET",body:{},onSuccess:function(e){"SUCCESS"===e.status&&o.setSignUpTestimonial(e.data||{})},onFailure:function(){return{}}})},o.getMaldivesTestimonial=function(){var e=le.b;return fetch(e).then((function(e){return e.json()})).then((function(e){var t=e.data&&e.data[Object(H.a)(0,5)];o.setSignUpTestimonial(t)}))},o.setSignUpTestimonial=function(e){var t=e.coverImage,a=e.shortestReview,n=void 0===a?"":a,i=e.destination,r=void 0===i?"":i,s=e.ttype,l=void 0===s?"":s,c=e.fName,d=void 0===c?"":c;o.setState({isKilled:!1,loginImage:Object(q.a)(t,"w=520&h=1200&fit=facearea&facepad=10&auto=enhance"),tripText:n,place:l+" TRIP TO "+r,fName:d})},o.navigateExactPath=function(e,t){var a=o.props,n=a.lastLocation,i=a.history,r=a.match,s=a.app,l=a.location,c=a.packages,d=a.hotelDetails,u=s.itineraryInfo.itinerary,p=void 0===u?{}:u,g=o.state,m=g.isMaldives,h=g.maldivesData,b=g.landingPageUrl,f=g.pytDealsData;if(m){var v=l.search?"".concat(b||se.gb.LANDING_ROUTE,"/listing/").concat(e).concat(l.search):l.pathname.replace("signup"===e?"login":"signup",e);i.push(v,{isMaldives:m,maldivesData:h})}else if(f)i.replace({pathname:t,search:o.props.queryParams||"",state:{pytDealsData:f,goback:(i.location.state||{}).goback}});else if(n&&(Object(W.a)(n.pathname,["get-cost"])||r.params.itineraryId)){var y=Object(se.Nb)({itineraryId:r.params.itineraryId,regionCode:r.params.searchRegion,target:"signup"===e?se.yb:se.fb,location:l});(d&&d.content||p&&p.campaign||c&&c.content)&&(y=Object(se.Lb)({pathname:i.location.pathname,itineraryId:r.params.itineraryId,target:e})),i.replace(y)}else t?i.replace({pathname:t,search:o.props.queryParams||""}):i.replace("/".concat(e))},o.alreadyAccountHandler=function(e){e.preventDefault(),o.navigateExactPath("signin",o.props.loginRouteURL)},o.getDestinationCreateItinerary=function(e){return Object(C.a)()?o.props.actions.createMleItinerary:e.regionCode?o.props.actions.createPDGDestinationItinerary:o.props.actions.createMleItinerary},o.getCostingConfigDubai=function(e){var t=o.props.app.user_details;if(!e&&t&&t.loggedIn)return o.getCostingConfiguration();var a=Object(de.a)(),n=o.props,i=n.history,r=n.lastLocation,s=Object(oe.b)({history:i,lastLocation:r,rc:"dxb"}),l={cities:[20],minDays:parseInt(a.min),maxDays:parseInt(a.max),region:"dxb",tripType:a.type,attractionIds:c,preferredMonth:a.month},c=a.ids.split(","),d=Object(ue.a)(a.rooms),u="".concat(a.date.length>1?a.date:"0"+a.date,"/").concat(a.month[0].toUpperCase()).concat(a.month.toLowerCase().substr(1,2),"/").concat(a.year);if(e)return{minDays:parseInt(a.min),maxDays:parseInt(a.max),month:a.month,type:a.type,attractionIds:c,hotelGuestRoomConfigurations:d,flightsBookedByUserAlready:!1,departureAirport:a.dep,departureDate:u,leadSource:s};var p={creationData:l,costingData:{flightsBookedByUserAlready:!1,costingConfig:{hotelGuestRoomConfigurations:d,departureAirport:a.dep,arrivalAirport:"$$$",departureDate:u}}};return s&&"object"===typeof s&&(p.costingData.leadSource=s),p},o.triggerMultipleEvents=function(e){e.forEach((function(e){Object(re.he)(e.event,e.eventProps)}))},o.beforeCostingFunction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];e?o.triggerMultipleEvents(n):o.props.actions.getUserDetails(t,a,n)},o.onSignUpOrLogInSuccess=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=o.state,i=o.props,r=i.actions,s=i.lastLocation,l=i.history,c=i.match,d=i.app,u=i.packages,p=i.hotelDetails,g=i.router,m=i.isPytDeals,h=(d||{}).itineraryInfo||{},b=h.itinerary,f=void 0===b?{}:b,v=c.params,y=v.itineraryId,O=v.hotelSlug,S=g||{},I=S.location,C=void 0===I?{}:I,E=u||{},T=E.content,P=void 0===T?{}:T,j=P||{},N=j.campaignDetails,x=void 0===N?{}:N,w=(Object(R.a)(d.itineraryInfo)?c.params.searchRegion:f.regionCode)||"region",D=Object(oe.b)({history:l,lastLocation:s,rc:w});if(e&&window.sessionStorage.setItem("USER_HASH_DATA",e.data),("SUCCESS"===e.status&&"User Created"===e.message||t)&&(o.props.location.pathname.includes(ge.a.DUBAI_SIGNUP)?o.props.actions.createDubaiItinerary(o.getCostingConfigDubai(!0),l):t||o.closeModal()),"INVALID_EMAIL"===e.status)a.validationState.emailAlreadyExist=e.message,a.isLoading=!1,a.disabledSignupButton=!1,o.setState(a);else if("MOBILE_EXISTS"===e.status||"EMAIL_EXISTS"===e.status){var L={};if(o.state.isDubai){var M=o.getCostingConfigDubai();M.creationData?L=M:L.costingConfig=M}else o.state.isPytDeals?L.costingConfig=l.location.state.pytDealsData:L.costingConfig=o.getCostingConfiguration();if(L.costingConfig||!Object.keys(L.costingConfig).length||o.state.isPytDeals)a.actionType="LOGIN",a.headerText="Account exists!",a.subText=e.message,a.isLoading=!1,a.disabledSignupButton=!1,a.errorStatus=e.status,o.setState(a);else{var A=Object(n.a)({itineraryId:y,costingType:"RECOST"},L),U=Object(me.a)(o.props,"location.state.customPath")||"",_={errorMessage:e.message};if("MOBILE_EXISTS"===e.status){var F,B=null!==(F=a.mobileNumber)&&void 0!==F&&F.startsWith("+")?a.mobileNumber.replace(/\D/g,"").substr(a.countryPhoneCode.replace("+","").length):a.mobileNumber;_=Object(n.a)(Object(n.a)({},_),{},{defaulMobileNumber:B,defaultCountryPhoneCode:a.countryPhoneCode})}else _=Object(n.a)(Object(n.a)({},_),{},{defaultEmail:a.email});r.showLoginForm({requestPayload:A,regionCode:w,history:l,preState:_,campaign:u&&u.content||p&&p.content||f&&f.campaign,customPath:U,pytDeals:m})}}else o.setState({isLoading:!!o.state.isMaldives},(function(){var a=o.getCostingConfiguration,n=a.departureAirport,i=a.departureDate,u=a.hotelGuestRoomConfigurations,p=void 0===u?{}:u;o.state.isMaldives||o.beforeCostingFunction(t,{prod_type:D.prodType},o.state.isMaldives?null:c.params.itineraryId?re.ae:re.Zd,c.params.itineraryId?[{event:re.ic,eventProps:{already_signedin:!1,departure_city:n,fromURL:document.referrer,departure_date:new Date(i),region_name:"packages"===(C.pathname||"").split("/")[1]||"vacations"===(C.pathname||"").split("/")[1]?(x.key||"").split("/")[1]:f.regionName,region_code:w||"region",room_count:p.length,adult_count:Object(k.a)(p,"adultCount")||0,child_count:Object(k.a)(p,(function(e){return e.childAges&&(e.childAges||[]).length}))||0,prod_type:D.prodType}}]:[]);var g=o.getDestinationCreateItinerary(o.state.maldivesData);if(o.state.isMaldives){var h=Object(me.a)(o.state.maldivesData,"regionCode")||"mle";g(o.state.maldivesData,(function(e){if(o.beforeCostingFunction(t,{prod_type:D.prodType},re.ae),O||Object(Q.a)())l.push("/customize/".concat(h,"/inclusions/").concat(e));else{o.closeModal();var a="/customize/".concat(h,"/inclusions/").concat(e),n=Object(Oe.a)(a,"_blank");n&&!n.closed&&"undefined"!=typeof n.closed||l.push(a)}}),(function(){o.beforeCostingFunction(t),swal("Oh no \ud83d\ude15 Something went wrong!","Please try again.")}),l,s)}else if(m){var b=l&&l.location.state||{},v=b.pytDealsData;b.goback?Object(Ie.b)():Object(be.a)({history:l,lastLocation:s,costingConfig:v})}else!o.isItineraryView&&y?Object(ee.a)({url:"".concat(je,"itinerary/campaign/").concat(y,"/assignUser"),method:"POST",body:{leadSource:Object(oe.b)({history:l,lastLocation:s,rc:w})},onSuccess:function(e){r.getCost({itineraryId:e.data,regionCode:w,req_data:Object.assign(o.props.app.getCostUpdatedObject,{itineraryId:e.data}),history:l,lastLocation:s,campaign:!0})},onFailure:function(){}}):c.params.itineraryId?r.getCost({itineraryId:y,regionCode:w,req_data:d.getCostUpdatedObject,history:l,lastLocation:s}):"VERIFIED"===e.status&&"User created"===e.message&&o.closeModal()}))},o.changeOTPstatusInState=function(e){var t=e.type,a=e.response,i=o.state;switch(t){case"GET_OTP_FAILED":switch(a.status){case"VERIFICATIONFAILED":i.isLoading=!1,i.profileNotFound=!0,i.forgetPasswordResponse=a.statusMessage}break;case"GET_OTP_SUCCESS":o.canValidate=!1,i.OTPResponseId=a.id,i.isLoading=!1,"OTP"===i.actionType&&(i.actionType="FORGOT",i.headerText="Received your OTP?",i.subText="Enter the code you received to proceed further",i.OTPResponse=a.statusMessage)}o.setState(Object(n.a)({},i))},o.getOTP=function(e){var t=e,a="".concat(je,"user/forgetpassword");Object(ee.a)({url:a,method:"POST",body:t,onSuccess:function(e){e&&"SUCCESS"===e.status?e.data&&"VERIFICATIONFAILED"===e.data.status?o.changeOTPstatusInState({type:"GET_OTP_FAILED",response:e.data}):o.changeOTPstatusInState({type:"GET_OTP_SUCCESS",response:e.data}):o.changeOTPstatusInState({type:"GET_OTP_ERROR",response:{message:"Failed to get user details"}})},onFailure:function(e){o.changeOTPstatusInState({type:"GET_OTP_ERROR",response:e})}})},o.inputLoginHandler=function(){o.getInstance((function(){o.setState({isLoading:!1},(function(){o.canValidate&&o.triggerValidation()}))}))},o.inputSignupHandler=function(){o.getInstance((function(){var e=o.state;o.setState({isLoading:!1},(function(){var t=o.state,a=t.validationState,n=t.signUpValidation;if(o.canValidate){var i=e.userName,r=e.email,s=e.mobileNumber,l=e.countryPhoneCode,c=!Object(ie.d)(r),d=!Object(z.a)(i),u=!s||!Object(Z.a)((""+s).includes("+")?s:"".concat(l).concat(s));i.trim().length?d?(a.isUserNameValid=!0,n.userNameResponse="Special characters not allowed"):a.isUserNameValid=!1:a.isUserNameValid=!0,r?c?(a.emailInvalid=!0,n.emailResponse="Entered email is not valid"):a.emailInvalid=!1:a.emailInvalid=!0,["","in","ae"].includes(o.state.locale)||s?s.length<4?a.mobileNumberInvalid=!0:u?(a.mobileNumberInvalid=!0,n.mobileNumberResponse="Entered mobile number is not valid"):a.mobileNumberInvalid=!1:a.mobileNumberInvalid=!1,o.setState({isLoading:!1,validationState:a})}}))}),!1)},o.onSwipeEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.a)(o),a=o.state.positionY,n=0,i=!1;Math.round(a/window.innerHeight*100)>20||e?(i=!0,n=window.innerHeight-a):n-=a;var s=e?400:200,l=document.getElementById("login-container");l&&Object(V.a)({duration:s,timing:function(e){return-n*Math.cos(e/s*(Math.PI/2))+n+a},execute:function(e){e>0&&(l.style.top=e+"px")},end:function(){i&&!0!==e&&t.closeModal()}}),o.setState({positionY:0})},o.toggleWhatsAppCheckBox=function(){o.setState({canSendWhatsAppMessages:!o.state.canSendWhatsAppMessages})};var s=e.location.state||{},l=s.isMaldives,c=void 0!==l&&l,p=s.maldivesData,g=void 0===p?{}:p,m=s.pytDealsData,h=!!c||e.lastLocation&&e.lastLocation.pathname.indexOf(se.gb.MALDIVES_SLUG_KEY)>-1;!Object(G.a)()&&sessionStorage&&"true"!==sessionStorage.getItem("isFromMaldivesRoute")&&sessionStorage.setItem("isFromMaldivesRoute",h?"true":"false");var b=Object(C.a)(),f=e.isSmmMobile,v=e.location.state||{},y=v.defaulMobileNumber,O=void 0===y?"":y,S=v.defaultCountryPhoneCode,I=void 0===S?"":S,E=v.defaultEmail,T=v.alreadyExist,P=v.defaultName,j=void 0===P?"":P,N=v.emailAlreadyExist,x=N?{emailAlreadyExist:N}:{};return o.state={countryPhoneCode:I,mobileNumber:O||"",identifier:"",password:"",otp:"",email:E||"",userName:j||"",isKilled:!0,showModal:!1,profileNotFound:!1,forgetPasswordResponse:"",OTPResponse:"",OTPResponseId:"",locale:e.locale?e.locale:!Object(G.a)()&&sessionStorage&&sessionStorage.getItem("locale"),alreadyExist:T,headerText:f||T?"Account exists":b?"Sign in to unlock the best deals!":e.headerText||u.a.createElement(d.Fragment,null,"Welcome to ",u.a.createElement("span",{className:"logo-txt"},"Pickyourtrail")),subText:f?"This email ID already exists. Try using a different one":b?"CRED deal is applicable only till April 30, 2020":e.subText||"Create and customize itineraries catering to your best interests",isLoading:!1,loginError:!1,loginErrorResponse:"",loginImages:[],loginQuotes:[],loginImage:"",loginQuote:"",validationState:Object(n.a)({mobileNumberInvalid:!1,otpInvalid:!1,passwordInvalid:!1},x),signUpValidation:{emailResponse:"",mobileNumberResponse:"",userNameResponse:""},actionType:e.actionType||"LOGIN",isDubai:e.dubai,isPytDeals:e.isPytDeals,pytDealsData:m,isMaldives:c,maldivesData:g,landingPageUrl:g?g.landingPageUrl:"/maldives-tour-packages",canSendWhatsAppMessages:!e.locale,hideWhatsAppUpdate:e.locale},o.canValidate=!1,o.openModal=o.openModal.bind(Object(r.a)(o)),o.closeModal=o.closeModal.bind(Object(r.a)(o)),o.clearErrorValidation=o.clearErrorValidation.bind(Object(r.a)(o)),o.triggerValidation=o.triggerValidation.bind(Object(r.a)(o)),o.handleKeyUp=o.handleKeyUp.bind(Object(r.a)(o)),o.setActionProperties=o.setActionProperties.bind(Object(r.a)(o)),o.onSwipeMove=o.onSwipeMove.bind(Object(r.a)(o)),o.onSwipeEnd=o.onSwipeEnd.bind(Object(r.a)(o)),o.getCostingConfiguration=o.getCostingConfiguration.bind(Object(r.a)(o)),o.setSignUp=o.setSignUp.bind(Object(r.a)(o)),o.getOTPClickHandler=o.getOTPClickHandler.bind(Object(r.a)(o)),o.triggerLogin=o.triggerLogin.bind(Object(r.a)(o)),o.triggerSignup=o.triggerSignup.bind(Object(r.a)(o)),o.identifierInstance=u.a.createRef(),o.passwordInstance=u.a.createRef(),o.nameInstance=u.a.createRef(),o.mobileInstance=u.a.createRef(),o.emailInstance=u.a.createRef(),o.otpInstance=u.a.createRef(),o.isItineraryView=Object(W.a)(o.props.location.pathname,["/view/","/inclusions/"]),o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){Object(J.a)(),this.state.countryPhoneCode||this.setState({countryPhoneCode:(Object(ye.a)()||{}).phoneCode||"+91"});var e=this.props,t=e.app,a=e.history,i=e.location,o=this.state.isItineraryPage,r=Object(C.a)();if("SIGNUP"===this.state.actionType?(this.setState({headerText:r?"Share your travel plans with us":this.props.headerText,subText:r?"CRED deal is applicable only till April 30, 2020":this.props.subText}),!Object(G.a)()&&sessionStorage&&"true"===sessionStorage.getItem("isFromMaldivesRoute")?this.getMaldivesTestimonial():this.getSignUpTestimonial()):this.callLoginImageRequest(),i.state&&i.state.mobile_number){var s=this.state;s.mobileNumber=i.state.mobile_number,i.state.errorMessage?(s.headerText="Account exists",s.subText=i.state.errorMessage):(s.headerText="Welcome back!",s.subText="Looks like you have an account created with this mobile number. Please login to calculate the trip cost."),this.setState(s),this.openModal(o)}else if(Object(W.a)(i.pathname,["/signup","/login"],-1)||Object.keys(t.getCostUpdatedObject).length)this.openModal(o);else{var l=i.pathname;l.replace("/login",""),l.replace("/signup",""),a.replace(l)}if("SIGNUP"===this.state.actionType){var c=JSON.parse(localStorage.getItem("callbackDetails"));c&&c.data&&this.setState({userName:c.data.name,email:c.data.email,mobileNumber:c.data.mobileNumber,countryPhoneCode:c.data.countryPhoneCode})}if(document.addEventListener("keyup",this.handleKeyUp),Object.keys(this.state.maldivesData).length>0&&Object(C.a)()){var d=JSON.parse(sessionStorage.getItem("credDealsResort"));this.setState((function(e){return{maldivesData:Object(n.a)(Object(n.a)({},e.maldivesData),{},{roomCode:d.roomTypeCode,mealCode:d.mealCode})}}))}}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp),Object(Y.a)()}},{key:"componentWillReceiveProps",value:function(e){var t=e.app;if("SIGNUP"!==this.state.actionType||this.state.fName||(!Object(G.a)()&&sessionStorage&&"true"===sessionStorage.getItem("isFromMaldivesRoute")?this.getMaldivesTestimonial():this.getSignUpTestimonial()),t&&t.action){var a=this.state;switch(t.action){case"LOGIN_ERROR":a.loginError=!0,a.loginErrorResponse=t.response;break;case"GET_OTP_FAILED":switch(t.response.status){case"VERIFICATIONFAILED":a.isLoading=!1,a.profileNotFound=!0,a.forgetPasswordResponse=t.response.statusMessage}break;case"GET_OTP_SUCCESS":this.canValidate=!1,a.OTPResponseId=t.response.id,a.isLoading=!1,"OTP"===a.actionType&&(a.actionType="FORGOT",a.headerText="Received your OTP?",a.subText="Enter the code you received to proceed further")}this.setState(Object(n.a)({},a))}}},{key:"openModal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({isKilled:!this.state.loginImage||!1,isItineraryView:t},(function(){setTimeout((function(){e.setState({showModal:!0})}),10),Object(B.a)()}))}},{key:"setSignUp",value:function(){this.navigateExactPath("signup",this.props.signupRouteURL)}},{key:"closeModal",value:function(){var e=this.props,t=e.history,a=e.lastLocation,n=e.match,i=e.location,o=e.hotelDetails,r=e.packages,s=e.app,l=e.isSmmMobile,c=e.isPytDeals;"LOGIN"===this.state.actionType&&l&&Object(re.he)(re.od,{clicked:!0}),sessionStorage&&sessionStorage.setItem("isFromMaldivesRoute","false");var d=(a||{}).pathname||"",u=this.state,p=u.isMaldives,g=u.landingPageUrl,m=d.includes("packages");this.setState({showModal:!1},(function(){setTimeout((function(){if(l&&Object(Q.a)()){var e=t.location.pathname,u=n.params.itineraryId;e=(e=(e=e.replace("/"+u+"/","")).replace("signup","")).replace("login",""),t.push(e)}else if(p){var h=d.split("/")[1];i.search?t.push("".concat(g||se.gb.LANDING_ROUTE,"/listing").concat(i.search)):h?t.push("/".concat(h)):t.push(g||se.gb.LANDING_ROUTE)}else if(m)t.goBack(),window.location.reload();else if(c){var b=t.location.pathname;if((t.location.state||{}).goback)t.goBack();else{var f=b.includes("/get-cost/login"),v=Ne?"".concat(f?"/login":"/signup"):"/get-cost".concat(f?"/login":"/signup");if(b.includes(v)){localStorage.removeItem("bookNowClicked");var y=b.replace(v,"");t.replace(y)}else t.goBack()}}else if(Object(W.a)(d,["your-vacations","yourtrips","account"]))window.location="/";else if(n.params.itineraryId){if(o&&o.content||r&&r.content||Object(me.a)(s.itineraryInfo,"itinerary.campaign",!1)){var O=Object(K.a)(i.pathname);t.push("/"+O)}else t.push(Object(se.Nb)({itineraryId:n.params.itineraryId,regionCode:n.params.searchRegion,location:i}))}else if(!a||a&&"/"===a.pathname){var S,I,C;if(null!==(S=i.search)&&void 0!==S&&S.includes("redirect=source"))null===(I=(C=window.history).back)||void 0===I||I.call(C);else window.location="/"}else t.goBack()}),300)}))}},{key:"handleKeyUp",value:function(e){27===e.keyCode&&this.closeModal()}},{key:"triggerValidation",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login",a=this.state,n=a.identifier,i=void 0===n?"":n,o=a.password,r=a.actionType,s=a.otp,l=a.validationState,c=a.forgetPasswordResponse,d=a.countryPhoneCode;this.clearErrorValidation();var u=null!==(e=""+i)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email";return"login"===t?(l.identifierInvalid=!("mobile"===u?Z.a:ie.d)("".concat("mobile"===u?d:"").concat(i)),l.passwordInvalid=!o.trim().length||l.identifierInvalid,l.loginInvalidResponse="",i.length>3&&o.trim().length&&(l.loginInvalidResponse=l.identifierInvalid?i?"Registered ".concat(u," number is not valid"):"Registered email/mobile number is not valid":""),"FORGOT"===r?l.otpInvalid=!s.trim().length||6!==s.length:"OTP"===r&&(l.identifierInvalid=!("mobile"===u?Z.a:ie.d)("".concat("mobile"===u?d:"").concat(i)),c=l.identifierInvalid?i?"Entered ".concat(u," is not valid"):"Entered email/mobile number is not valid":c)):"get_otp"===t&&(l.identifierInvalid=!("mobile"===u?Z.a:ie.d)("".concat("mobile"===u?d:"").concat(i)),l.otpInvalid=!1,l.passwordInvalid=!1),this.setState({forgetPasswordResponse:c,validationState:l}),N()(w()(l),(function(e){return!e}))}},{key:"getInstance",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=(this.identifierInstance.current||{}).state,n=(this.mobileInstance.current||{}).state,i=(this.passwordInstance.current||{}).state,o=(this.otpInstance.current||{}).state,r=(this.nameInstance.current||{}).state,s=(this.emailInstance.current||{}).state;this.setState({identifier:a?a.identifier:n?n.mobileNumber:"",mobileNumber:n?n.mobileNumber:"",countryPhoneCode:a?a.extensionNumber:n?n.extensionNumber:this.state.countryPhoneCode||"+91",password:i?i.value:"",otp:o?o.value:"",userName:r?r.value:"",email:s?s.value:"",isLoading:t},(function(){e()}))}},{key:"triggerLogin",value:function(e,t){var a=this;if(this.canValidate=!0,e&&e.preventDefault(),t)return Object(re.he)(re.P,{element_name:"continue as guest clicked"}),void this.onSignUpOrLogInSuccess({},!0);this.clearErrorValidation(),this.getInstance((function(){a.triggerValidation()?a.setState({isLoading:!0},(function(){var e,t=a.props||{},i=t.app,o=t.hotelDetails,r=t.packages,s=void 0===r?{}:r,l=t.router,c=t.actions,d=t.history,u=t.lastLocation,p=t.match,g=t.isSmmMobile,m=a.state,h=m.identifier,b=m.password,f=m.actionType,v=m.otp,y=m.OTPResponseId,O=m.isDubai,S=m.isMaldives,I=m.maldivesData,E=m.isPytDeals,T=m.countryPhoneCode,P=null!==(e=""+h)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email",j=(s||{}).content,N=((void 0===j?{}:j)||{}).campaignDetails,x=void 0===N?{}:N,w=(i||{}).itineraryInfo,R=void 0===w?{}:w,D=(l||{}).location,k=void 0===D?{}:D,L=(R||{}).itinerary,M=void 0===L?{}:L,A=(!g||!Object(Q.a)())&&(a.isItineraryView||p.params.itineraryId||a.state.isPytDeals),U=Object(n.a)(Object(n.a)({},"mobile"===P?{countryPhoneCode:T,mobileNumber:h}:{email:h}),{},{password:b}),_=i.packages&&Array.isArray(i.packages.filteredItineraries)&&i.packages.filteredItineraries.length||o&&o.content?p.params.itineraryId:!Object($.a)(i.itineraryInfo)&&i.itineraryInfo.campaignItineraryId?i.itineraryInfo.campaignItineraryId:null;"FORGOT"===f&&(U.otp=v,U.id=y),A?c.login({req_data:U,isItineraryView:!0,isPytDeals:E,itineraryInfo:i.itineraryInfo,getCostObject:E?Object.keys(i.getCostUpdatedObject).length?i.getCostUpdatedObject:(d.location.state||{}).pytDealsData:i.getCostUpdatedObject,history:d,loginType:"USER",location:d.location,lastLocation:u,campaignItineraryId:_,match:p,regionName:"packages"===k.pathname.split("/")[1]||"vacations"===k.pathname.split("/")[1]?(x.key||"").split("/")[1]:M.regionName}).then((function(){a.setState({isLoading:!1,showModal:!1}),!Object(G.a)()&&window.gtag&&window.gtag("event","login",{event_category:"engagement",event_label:"method",value:"0"})})).catch((function(){a.setState({isLoading:!1})})):c.login({req_data:U,isItineraryView:!1,history:d,loginType:"USER",location:k,lastLocation:u,match:p,regionName:"packages"===k.pathname.split("/")[1]||"vacations"===k.pathname.split("/")[1]?(x.key||"").split("/")[1]:M.regionName,isDubai:O,dubaiAction:c.createDubaiItinerary,isMaldives:S,maldivesData:I,isSmmMobile:g&&Object(Q.a)(),maldivesAction:a.getDestinationCreateItinerary(I),maldivesErrorHandle:function(){a.setState({isLoading:!1}),swal({title:"Sold out! \ud83d\ude15",animation:!0,html:!0,text:'<h5 class="meta-text">Try exploring other resorts, else Email us at <a href="mailto:speedboat@pickyourtrail.com">speedboat@pickyourtrail.com</a>, we will try our best and check availability for the same resort offline.</h6>',confirmButtonText:"Explore other resorts",closeOnConfirm:!0,closeOnCancel:!0,showCancelButton:!0,cancelButtonText:"Okay, got it"},(function(e){if(e){var t;if(Object(C.a)())t="/cred-offers";else{var a=I.departureDate,i=I.nights,o=I.passengerConfiguration,r=I.arrivalAirport;t=Object(pe.a)(Object(n.a)(Object(n.a)({},I),{},{airportCode:r,date:a,stayDuration:i,paxDetails:o}),!1,I.listingPageUrl?I.listingPageUrl:se.gb.LISTING_ROUTE)}d&&d.push(t)}}))},closeModal:a.closeModal}).then((function(){a.setState({isLoading:!1,showModal:!1}),!Object(G.a)()&&window.gtag&&window.gtag("event","login",{event_category:"engagement",event_label:"method",value:"0"})})).catch((function(){a.setState({isLoading:!1})}))})):a.setState({isLoading:!1})}))}},{key:"triggerSignup",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.preventDefault(),this.canValidate=!0,a)return Object(re.he)(re.P,{element_name:"continue as guest clicked"}),void this.onSignUpOrLogInSuccess({},!0);Object(re.he)(re.U,{element_name:"new account clicked"}),this.state.disabledSignupButton||this.setState({disabledSignupButton:!0},(function(){t.getInstance((function(){t.validateSignUpForm()}))}))}},{key:"getCostingConfiguration",value:function(){var e=this.props.app.user_details,t=this.props.app.getCostUpdatedObject.costingConfig,a=Object(D.a)(t,["bookingPlan_Text","departureAirport_Text"]);return e&&e.loggedIn&&"ADMIN"===e.userType&&"2"===a.tripStage&&(a.tripStage="4"),a}},{key:"validateSignUpForm",value:function(){var e,t,a,n=this,i=this.state;this.inputSignupHandler();var o=i.userName,r=i.email,s=i.mobileNumber,l=i.countryPhoneCode,c=i.canSendWhatsAppMessages,d=i.locale,u=""!==r.trim()&&Object(ie.d)(r),p=!["","in","ae"].includes(d)&&!s||Object(Z.a)(null!==(e=""+s)&&void 0!==e&&e.includes("+")?s:"".concat(l).concat(s)),g=""!==o.trim(),m=((""+s).replace(/\D/g,"").substr(l.replace("+","").length),i.validationState);m.mobileNumberInvalid=!p,m.emailInvalid=!u,m.isUserNameValid=!g;var h=this.props,b=h.location,f=h.lastLocation,v=h.history,y=h.match,O=h.app,S=O.itineraryInfo,I=S.itinerary,C=void 0===I?{}:I,E=S.version,T=y.params.itineraryId,P=(Object(R.a)(O.itineraryInfo)?null!==b&&void 0!==b&&null!==(t=b.state)&&void 0!==t&&t.isMaldives?"mle":y.params.searchRegion:C.regionCode)||"region",j=Object(oe.b)({history:v,lastLocation:f,rc:P,version:E||null!==b&&void 0!==b&&null!==(a=b.state)&&void 0!==a&&a.isMaldives?"SPEEDBOAT":""});this.setState(m,(function(){if(u&&p&&g){var e="".concat(je,"user/signup/verifyotp");T||n.props.location.state&&n.props.location.state.isMaldives||(e="".concat(je,"user/homePage/signup"));var t={mobileNumber:s,userName:o,email:r,countryPhoneCode:l,leadSource:j,cpid:sessionStorage.getItem("campaignId"),canSendWhatsAppMessages:c};Object(ee.a)({url:e,method:"POST",body:t,onSuccess:function(e){e&&n.onSignUpOrLogInSuccess(e)},onFailure:function(e){if(!e.response)return null;e.response&&409===e.response.status?("Mobile number already exists"===e.response.data?(i.actionType="LOGIN",i.headerText="Welcome back!",i.subText="Looks like you have an account created with this mobile number. Please login with your details",i.isLoading=!1):"Email id already exists"===e.response.data&&(i.validationState.emailAlreadyExist="This email ID already exists. Kindly login with your username and password",i.isLoading=!1),i.disabledSignupButton=!1,n.setState(i)):e.response&&e.response.status}})}else n.setState({isLoading:!1,disabledSignupButton:!1})}))}},{key:"clearErrorValidation",value:function(e){e&&e.preventDefault();var t=this.state.validationState;t.mobileNumberInvalid=!1,t.passwordInvalid=!1,t.emailAlreadyExist="",t.isUserNameValid=!1,t.emailInvalid="",t.loginInvalidResponse="",this.setState({forgetPasswordResponse:"",profileNotFound:!1,loginError:!1,loginErrorResponse:"",validationState:t,signUpValidation:{emailResponse:"",mobileNumberResponse:"",userNameResponse:""}})}},{key:"getOTPClickHandler",value:function(e){var t=this;e&&e.preventDefault(),this.canValidate=!0;this.getInstance((function(){if(t.triggerValidation("get_otp")){var e,a=t.state,n=a.countryPhoneCode,i=a.identifier,o=null!==(e=""+i)&&void 0!==e&&e.match(/^\d+$/)?"mobile":"email";t.getOTP("mobile"===o?{countryPhoneCode:n,mobileNumber:i}:{email:i})}else t.setState({isLoading:!1})}))}},{key:"onSwipeMove",value:function(e){var t=document.getElementById("login-container");this.setState({positionY:e.y}),t&&e.y>0&&(t.style.top=e.y+"px")}},{key:"setActionProperties",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LOGIN",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Welcome back!",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Create an account to personalize and save your itineraries.";this.canValidate=!1,this.setState({actionType:t,headerText:a,subText:n,isLoading:!1},(function(){e.clearErrorValidation()}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.showModal,n=t.isKilled,i=t.forgetPasswordResponse,o=t.profileNotFound,r=t.headerText,s=t.mobileNumber,l=t.countryPhoneCode,c=t.subText,g=t.loginError,m=t.loginErrorResponse,h=t.validationState,b=t.actionType,f=t.isLoading,v=t.loginImage,O=t.signUpValidation,S=t.disabledSignupButton,I=t.userName,C=t.email,E=t.canSendWhatsAppMessages,T=t.locale,j=(t.isMaldives,t.OTPResponse),N=t.hideWhatsAppUpdate,x=t.alreadyExist,w=t.errorStatus,R=t.identifier,D=this.props,k=D.nameLabel,L=D.emailLabel,M=D.submitButtonText,A=D.footerLinkText,U=(D.match,D.history),_=Object(W.a)((this.props.lastLocation||{}).pathname,["get-cost"])&&(this.props.app.regionStatus||{}).regionName;return!n||this.props.isTestKilled||Object(Q.a)()?u.a.createElement(d.Fragment,null,u.a.createElement("div",{className:y()("modal fade modal-sticky-header modal-touch-header primary-popups parent-close",{slideUp:Object(F.a)(),in:a&&v,"costing-popup":_&&!Object(F.a)()}),onClick:function(t){Object(X.a)(t,e.closeModal)},tabIndex:-1},u.a.createElement("div",{className:"modal-dialog",id:"login-container"},u.a.createElement("div",{className:"modal-content with-header"},u.a.createElement(ae.a,{onSwipeMove:this.onSwipeMove,onSwipeEnd:this.onSwipeEnd},u.a.createElement("div",{id:"tab-btn",className:"modal-header touch-header","data-dismiss":"modal"},u.a.createElement(p.a,{buttonClass:"tap-btn",onClickAction:function(t){t&&t.preventDefault()&&t.stopPropagation(),e.onSwipeEnd(!0)}}))),u.a.createElement("div",{className:"modal-body"},u.a.createElement("div",{className:"inner-content"},_?u.a.createElement(P,{regionStatus:this.props.app.regionStatus}):u.a.createElement(Re,{image:this.state.loginImage,quotes:this.state.loginQuote,isSignUp:"SIGNUP"===this.state.actionType,tripText:this.state.tripText,place:this.state.place,fName:this.state.fName}),u.a.createElement(De,{headerText:r,history:U,email:C,userName:I,mobileNumber:R||s,countryPhoneCode:l,subText:c,nameLabel:k,emailLabel:L,loginError:g,loginErrorResponse:m,validationState:h,actionType:b,profileNotFound:o,forgetPasswordResponse:i,OTPResponse:j,isLoading:f,nameInstance:this.nameInstance,emailInstance:this.emailInstance,triggerCloseModal:this.closeModal,triggerLogin:this.triggerLogin,triggerSignup:this.triggerSignup,triggerOTP:this.getOTPClickHandler,identifierInstance:this.identifierInstance,mobileInstance:this.mobileInstance,passwordInstance:this.passwordInstance,otpInstance:this.otpInstance,loginChangeCall:this.inputLoginHandler,signUpChangeCall:this.inputSignupHandler,setSignUp:this.setSignUp,setLogin:this.alreadyAccountHandler,disabledSignupButton:S,signUpValidation:O,submitButtonText:M,footerLinkText:A,toggleWhatsAppCheckBox:this.toggleWhatsAppCheckBox,canSendWhatsAppMessages:E,hideWhatsAppUpdate:N,setForgot:function(){e.setActionProperties("OTP","Retrieve Password","Enter your email/mobile number")},alreadyExist:x,errorStatus:w,locale:T}))))))):null}}]),a}(d.Component),we=function(){return u.a.createElement("div",{className:"modal-backdrop fade in"})},Re=function(e){var t=(e.quotes||{}).text,a=(e.quotes||{}).author,n=e.place,i=e.tripText,o=e.fName;return u.a.createElement("aside",{className:"hidden-xs",style:{backgroundImage:"url("+Object(q.a)(e.image)+")"}},u.a.createElement("div",{className:"side-content"},u.a.createElement("p",{className:"fine-text light mbottom-medium"},e.isSignUp?i:t),e.isSignUp?u.a.createElement("p",{className:"caps-text-tiny bold mb-0 dim"},o," ",u.a.createElement("br",null)," ",n):u.a.createElement("p",{className:"caps-text-tiny bold mb-0"},a)))},De=function(e){var t=e.triggerCloseModal,a=e.headerText,n=e.subText,i=e.history,o=e.actionType,r=(i.location.state||{}).noteMessage;return u.a.createElement("div",{className:"right-content"},u.a.createElement("div",{className:"top-btns hidden-xs"},u.a.createElement(p.a,{buttonClass:"pull-right btn btn-link",onClickAction:t},u.a.createElement(Te.a,{width:18,height:18}))),u.a.createElement(Me,{headerText:a,subText:n}),u.a.createElement("form",{className:"clearfix fw",action:"#"},u.a.createElement(ke,e),u.a.createElement(Le,e)),r&&!["OTP","FORGOT"].includes(o)?u.a.createElement("div",{style:{fontSize:"13px",lineHeight:"20px",color:"#BF364A",textAlign:"center"}},r):null)},ke=function(e){var t,a,n=e.identifierInstance,i=(e.identifierLabel,e.mobileInstance),o=e.passwordInstance,r=e.validationState,s=e.loginError,l=e.loginErrorResponse,c=e.actionType,p=e.nameLabel,b=e.emailLabel,f=e.nameInstance,v=e.emailInstance,y=e.setForgot,O=e.profileNotFound,S=e.otpInstance,I=e.forgetPasswordResponse,C=e.OTPResponse,E=e.triggerOTP,T=e.mobileNumber,P=void 0===T?"":T,j=e.countryPhoneCode,N=void 0===j?"+91":j,x=e.loginChangeCall,w=e.signUpChangeCall,R=e.signUpValidation,D=e.userName,k=e.email,L=e.canSendWhatsAppMessages,M=e.toggleWhatsAppCheckBox,A=e.history,U=e.hideWhatsAppUpdate,_=(e.alreadyExist,e.errorStatus),F=(e.locale,A.location.state||{}),B=F.disableMobileNumber,G=F.pytDealsData,V="MOBILE_EXISTS"===_?"":k||(null!==(t=""+P)&&void 0!==t&&t.match(/^\d+$/)?"":P),W=!(null===(a=""+P)||void 0===a||!a.match(/^\d+$/));switch(c){case"SIGNUP":return u.a.createElement(d.Fragment,null,u.a.createElement(h.a,{nameField:!0,ref:f,key:"name",defaultValue:D,isError:r.isUserNameValid,labelText:p||"Your name",placeHolder:p||"Your name",errorResponse:R.userNameResponse||"Enter your name",changeCall:w}),u.a.createElement(h.a,{ref:v,isError:r.emailInvalid||r.emailAlreadyExist,defaultValue:k,labelText:b||"Email",placeHolder:b||"Email",changeCall:w,errorResponse:R.emailResponse||r.emailAlreadyExist||"Enter your mail address"}),u.a.createElement(m.a,{ref:i,mobileNumber:P,countryPhoneCode:N,extNumber:N,isSignUp:!0,isError:r.mobileNumberInvalid,errorResponse:R.mobileNumberResponse||"Enter your valid mobile number",changeCall:w}),U?null:u.a.createElement("div",{className:"form-group"},u.a.createElement("div",{className:"clearfix"},u.a.createElement("label",{className:"custom-options",onClick:M},u.a.createElement("input",{type:"checkbox",checked:L,name:"canSendWhatsAppMessages"}),u.a.createElement("span",null,"Send me my trip updates on Whatsapp"),u.a.createElement("i",null)))));case"FORGOT":return u.a.createElement(d.Fragment,null,u.a.createElement(Ee.a,{extNumber:N,ref:n,mobileNumber:P,countryPhoneCode:N,isError:r.identifierInvalid,changeCall:x,disabled:!0,errorResponse:"Enter valid email or mobile number"}),u.a.createElement(g.a,{ref:S,isError:s||r.otpInvalid,errorResponse:l||"Please enter valid otp",placeHolder:"Enter OTP",labelText:"Enter OTP",maxLength:6,isOTP:!0,OTPResponse:C,forgotAction:function(){Object(re.he)(re.Wd,{forgot_password:!0}),E()},changeCall:x}),u.a.createElement(g.a,{ref:o,isError:r.passwordInvalid,errorResponse:"Please Enter Password",placeHolder:"Set a new password",changeCall:x,labelText:"Set a new password"}));case"OTP":var H;return u.a.createElement(Ee.a,{disabled:!(!G||!B),extNumber:N,ref:n,mobileNumber:V||P,hideCountryCode:!!V.length||!W,countryPhoneCode:N,isError:O||r.identifierInvalid,changeCall:x,errorResponse:I||(P?null!==(H=""+P)&&void 0!==H&&H.match(/[a-z]/i)?"Enter your registered email and click Get OTP":"Enter your registered mobile number and click Get OTP":"Enter your registered email/mobile number and click Get OTP")});default:var z;return u.a.createElement(d.Fragment,null,u.a.createElement(Ee.a,{ref:n,mobileNumber:V||P,countryPhoneCode:N,extNumber:N,placeholderText:"Enter Email/Mobile number",hideCountryCode:!!V.length||!W,isError:r.identifierInvalid,errorResponse:R.mobileNumberResponse||P?null!==(z=""+P)&&void 0!==z&&z.match(/[a-z]/i)?"Enter your valid email":"Enter your valid mobile number":"Enter your valid email/mobile number",changeCall:w}),u.a.createElement(g.a,{ref:o,enableForgot:!0,forgotAction:function(){Object(re.he)(re.Wd,{forgot_password:!0}),y()},isError:s||r.passwordInvalid,changeCall:x,errorResponse:l||r.loginInvalidResponse||"Enter your registered mobile number and password",placeHolder:"Password",labelText:"Password"}))}},Le=function(e){var t=e.triggerLogin,a=e.setSignUp,n=e.actionType,i=e.triggerSignup,o=e.setLogin,r=e.triggerOTP,s=e.isLoading,l=e.disabledSignupButton,c=void 0!==l&&l,d=e.setForgot,g=e.submitButtonText,m=void 0===g?"Create my account":g,h=e.footerLinkText,b=void 0===h?"Already have an account":h,f=e.showContinueAsGuestOption,v=void 0!==f&&f,y=e.history,O="SIGNUP"===n,S="OTP"===n,I=Object(C.a)(),E={direction:["vertical","horizontal"],display:"flex",gutter:Object(Q.a)()?["16px"]:["12px"],itemProps:{display:"flex",width:"100%"}};return u.a.createElement("div",{className:"btns-row"},u.a.createElement(Ce.Space,E,!Object(G.a)()&&v?u.a.createElement(p.a,{buttonClass:"btn btn-primary btn-lg btn-block",buttonText:"Continue as guest",onClickAction:O?function(e){return i(e,!0)}:function(e){return t(e,!0)}}):null,u.a.createElement(p.a,{buttonClass:"btn btn-primary btn-lg ".concat(v?"btn-outline":"btn-block"," ").concat(O?"tracker-signup-cta-in-modal":S?"":"tracker-login-cta-in-modal"),buttonText:O?m:S?"Get OTP":"Create my account"!==m?m:"Login",type:"submit",disabledSignupButton:O&&c,onClickAction:O?i:S?r:t,isLoading:s})),["FORGOT","OTP"].includes(n)||O||!Object(Q.a)()?null:u.a.createElement("button",{className:"btn btn-block btn-link",onClick:function(e){e&&e.preventDefault(),d()},style:{fontWeight:"normal"}},"Forgot password?"),"FORGOT"!==n?u.a.createElement(p.a,{buttonClass:"btn btn-link",buttonText:O?v?"Already have an account":b:I?"Sign up to complete booking":Se.a&&(y.location.state||{}).alreadyExist?"":"Sign up to get free quotes",onClickAction:O?o:a}):null)},Me=function(e){var t=e.headerText,a=e.subText;return u.a.createElement("div",{className:"title-txt"},u.a.createElement("span",{className:"visible-xs center-block"}),u.a.createElement("h5",{className:"medium-heading bold"},t),a?u.a.createElement("p",{className:"main-para light color-grey"},a):null)};t.default=Object(ne.withLastLocation)(Object(b.c)((function(e){var t=(e.app||{}).locale;return Object(n.a)(Object(n.a)({},e),{},{locale:t})}),(function(e){return{actions:{login:Object(f.b)(_.a,e),loginWithOTP:Object(f.b)(_.b,e),getUserDetails:Object(f.b)(L.a,e),showLoginForm:Object(f.b)(M.a,e),getCost:Object(f.b)(A.a,e),createMleItinerary:Object(f.b)(U.a,e),createDubaiItinerary:Object(f.b)(ce.a,e),createPDGDestinationItinerary:Object(f.b)(he.a,e),setAssignUserItineraryId:Object(f.b)(fe.a,e),getLivePrice:Object(f.b)(ve.a,e)}}}))(xe))},1601:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e||{}).length}a.d(t,"a",(function(){return n}))},1619:function(e,t,a){},1624:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){var t="";return Array.isArray(e)&&e.forEach((function(a,n){t=t+"a"+a.adultCount+(a.childAges.length?"c":"")+a.childAges.join("c"),n+1<e.length&&(t+="r")})),t}},1631:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(7),i=a(12);function o(e){var t=e.requestPayload,a=e.history,o=e.preState,r=void 0===o?{}:o,s=e.campaign,l=e.regionCode,c=void 0===l?"region":l,d=e.isMaldivesPreCosted,u=e.customPath,p=void 0===u?"":u,g=e.pytDeals;return function(e){return new Promise((function(o){e({type:i.nb,payload:t});var l=Object(n.Nb)({itineraryId:t.itineraryId,regionCode:c,location:a.location,target:n.fb});s&&(l=Object(n.Lb)({pathname:a.location.pathname,itineraryId:t.itineraryId,target:n.fb})),d&&(l="".concat(a.location.pathname.replace("get-cost",""),"login")),p&&(l="".concat(p,"/login"),r.customPath=p),r.isMaldives=!!p||d,r.maldivesData=t.costingConfig,g&&(r.pytDealsData=t.costingConfig),a.push({pathname:l,state:r}),o("Promised resolved from fetch")}))}}},1639:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(7),i=a(74),o=a(596),r=a(1624),s=function(e){return 2===e.toString().length?e:"0".concat(e)},l=function(e,t){var a=e.airportCode,l=e.date,c=e.stayDuration,d=e.paxDetails,u=e.arrivalAirportCode,p=e.nationality,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.gb.LISTING_ROUTE,m=Object(i.a)().getGlobalDate(new Date(Object(o.a)(l,"/","-"))),h="object"===typeof p?p.value:p,b=m.getFullYear()+"-"+s(m.getMonth()+1)+"-"+s(m.getDate()),f=Object(r.a)(d);if(t)return{date:b,from:a,travellers:f,duration:c,nationality:h,arrivalAirportCode:u};var v=g||n.gb.LISTING_ROUTE;return v+"?date=".concat(b,"&from=").concat(a,"&travellers=").concat(f,"&duration=").concat(c,"&arrivalAirportCode=").concat(u,"&nationality=").concat(h)}},1689:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(38),i=a(39),o=a(58),r=a(46),s=a(56),l=a(29),c=a(0),d=a.n(c),u=a(35),p=a.n(u),g=a(613);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var h=function(e){Object(r.a)(a,e);var t=m(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={value:e.value||e.defaultValue||""},i.onInputChange=i.onInputChange.bind(Object(o.a)(i)),i}return Object(i.a)(a,[{key:"onInputChange",value:function(e){var t=this;if(this.props.nameField&&"string"===typeof e.target.value&&e.target.value.length&&!Object(g.a)(e.target.value))return!1;this.setState({value:e.target.value},(function(){t.props.changeCall&&t.props.changeCall(t.state.value)}))}},{key:"render",value:function(){var e=this.props,t=e.placeHolder,a=e.labelText,n=e.isError,i=e.errorResponse,o=e.defaultValue,r=e.value,s=e.helpText,l=e.boxed,c=void 0!==l&&l,u=e.wrapperClassNames,g=e.disabled,m=void 0!==g&&g;return d.a.createElement("div",{className:"".concat(u," ").concat(p()("form-group form-group-lg",{flat:!c,"has-error":n}))},d.a.createElement("div",{className:"label-animative"},d.a.createElement("input",{type:"text",autoComplete:"offf",onChange:this.onInputChange,className:p()("form-control",{"cursor-not-allowed":m}),placeholder:t,value:r||this.state.value,defaultValue:o,disabled:m}),d.a.createElement("label",{className:"control-label"},a)),n||s?d.a.createElement("span",{className:"help-block"},n?i:s):null)}}]),a}(c.Component)},1722:function(e,t,a){"use strict";t.a=function(e){var t=e.duration,a=e.execute,n=e.timing,i=e.end,o=performance.now();requestAnimationFrame((function e(r){var s=(r-o)/t;s>1&&(s=1);var l=n(r-o);a(l),s<1?requestAnimationFrame(e):i&&i()}))}},1792:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(93),i=a(23),o=a(15),r=a(49),s=a.n(r);function l(e,t,a,r,l){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return function(){return new Promise((function(){var d,u=e.departureAirportCode,p=e.departureAirport,g=e.departureDate,m=e.passengerConfiguration,h=e.arrivalAirportCode,b=e.nights,f=e.roomCode,v=e.mealCode,y=e.nationality,O="string"===typeof y?y.length>0?y.toUpperCase():null:((y||{}).value||"").toUpperCase(),S={departureAirportCode:u||p,arrivalAirportCode:h||(u||p),onwardArrivalAirportCode:e.regionCode?e.regionCode.toUpperCase():"MLE",returnDepartureAirportCode:e.regionCode?e.regionCode.toUpperCase():"MLE",departureDate:s()(g).format("YYYY-MM-DD"),passengerConfiguration:m||e.hotelGuestRoomConfigurations,nights:b,roomCode:f,mealCode:v,nationality:O};S.leadSource=Object(n.b)({history:r,lastLocation:l,itineraryId:""}),S.leadSource.rc=e.regionCode||"mle",S.leadSource.prodType="speedboat",f?(d="".concat(o.a.api_url,"itinerary/islandResort/static/").concat(e.regionCode,"/").concat(e.resortCode,"?partner=CRED"),S.leadSource.prodType="CRED"):d="".concat(o.a.api_url,"itinerary/islandResort/mle/").concat(e.resortCode),Object(i.a)({url:d,method:"POST",body:S,locale:c,onSuccess:function(e){"SUCCESS"===e.status&&e.data?t(e.data):a("Failed: "+JSON.stringify(e))},onFailure:function(){a("Failed")}})}))}}},1808:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(14),i=a(15),o=a(23),r=a(7),s=a(12);function l(e,t){return function(a){return new Promise((function(l,c){var d=e.minDays,u=e.maxDays,p=e.month,g=e.type,m=e.attractionIds,h=e.hotelGuestRoomConfigurations,b=e.flightsBookedByUserAlready,f=void 0!==b&&b,v=e.departureAirport,y=e.arrivalAirport,O=e.departureDate,S=e.leadSource,I=e.nationality,C="outside"===v.toLowerCase()?"$$$":v,E={creationData:{cities:[20],minDays:parseInt(d),maxDays:parseInt(u),preferredMonth:p,attractionIds:m,region:"dxb",tripType:"string"===typeof g?g.toUpperCase():"COUPLE"},costingData:{flightsBookedByUserAlready:f,costingConfig:{tripType:"string"===typeof g?g.toUpperCase():"COUPLE",hotelGuestRoomConfigurations:h,departureAirport:C,arrivalAirport:y||C,departureDate:O,nationality:I||"IN"}}};S&&"object"===typeof S&&(E.costingData.leadSource=S),Object(n.he)(n.Ic,{duration:d+" - "+u,month:p,destination_code:"dxb"});var T="".concat(i.a.api_url,"itinerary/dubai");Object(o.a)({url:T,method:"POST",body:E,onSuccess:function(e){if("SUCCESS"===e.status){var n=e.data.itineraryId;a({type:s.pb,payload:e.data}),t.push(Object(r.Nb)({itineraryId:n,regionCode:"dxb",location:t.location,target:r.x,parentPage:r.eb})),l("Promised resolved from fetch")}else a({type:s.o,payload:e.data.response}),c("Failed")},onFailure:function(e){a({type:s.o,payload:e}),c("Failed")}})}))}}},1855:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o}));var n=a(15),i="https://s3.ap-south-1.amazonaws.com/oceanjar-new/ui/json_static/maldivesSignUpTestimonial.json",o="https://s3.ap-south-1.amazonaws.com/oceanjar-new/ui/json_static/login.json";"".concat(n.a.s3_oceanjar_new_url,"images/web_app/homepage/json/getawayData_v2.json"),"".concat(n.a.s3_oceanjar_new_url,"images/web_app/homepage/json/testimonialsData_v2.json")},1856:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(93),i=a(23),o=a(15),r=a(49),s=a.n(r),l=a(12);function c(e,t,a,r,c){return function(d){return new Promise((function(){var u=e.departureAirport,p=e.departureDate,g=e.hotelGuestRoomConfigurations,m=e.arrivalAirportCode,h=e.nights,b=e.regionCode,f=e.version,v=e.itineraryId,y=e.campaignItineraryId,O=e.flow,S={version:f,itineraryId:v,campaignItineraryId:y,costingConfig:{departureAirport:u,departureDate:s()(p).format("DD/MMM/YYYY"),hotelGuestRoomConfigurations:g,arrivalAirport:m||u,onwardArrivalAirportCode:b,returnDepartureAirportCode:b,nights:h},flow:O};S.leadSource=Object(n.b)({history:r,lastLocation:c,itineraryId:"",rc:b}),S.leadSource.prodType="PDG";var I="".concat(o.a.api_url,"multi-itinerary/create");Object(i.a)({url:I,method:"POST",body:S,onSuccess:function(e){"SUCCESS"===e.status&&e.data?(t(e.data),d({type:l.Fc,payload:e})):a("Failed")},onFailure:function(){a("Failed")}})}))}}},1879:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a.n(n),o=function(e){return i.a.createElement("svg",Object.assign({width:"1em",height:"1em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 12C20 7.58172 16.4183 4 12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12ZM22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12ZM13 9C13 8.44772 12.5523 8 12 8C11.4477 8 11 8.44772 11 9C11 9.55228 11.4477 10 12 10C12.5523 10 13 9.55228 13 9ZM12 16C12.5523 16 13 15.5523 13 15V12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12V15C11 15.5523 11.4477 16 12 16Z"}))}},1938:function(e,t,a){"use strict";function n(e){return!/[^a-zA-Z ]/.test(e)}a.d(t,"a",(function(){return n}))},2166:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(38),i=a(39),o=a(58),r=a(46),s=a(56),l=a(29),c=a(0),d=a.n(c),u=a(35),p=a.n(u),g=a(190),m=a(20);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var b=function(e){Object(r.a)(a,e);var t=h(a);function a(e){var i;return Object(n.a)(this,a),(i=t.call(this,e)).state={value:"",disabledResend:!0,counterText:20},i.onInputChange=i.onInputChange.bind(Object(o.a)(i)),i.onResendAction=i.onResendAction.bind(Object(o.a)(i)),i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.triggerCounter()}},{key:"triggerCounter",value:function(){var e,t=this;t.state.disabledResend?e=setInterval((function(){1!==t.state.counterText?t.setState({counterText:t.state.counterText-1}):(clearInterval(e),t.setState({disabledResend:!1}))}),1e3):clearInterval(e)}},{key:"onInputChange",value:function(e){this.setState({value:e.target.value}),this.props.changeCall&&this.props.changeCall(e.target.value)}},{key:"onResendAction",value:function(e){var t=this;this.state.disabledResend||this.setState({disabledResend:!0,counterText:20},(function(){t.props.forgotAction(e),t.triggerCounter()}))}},{key:"render",value:function(){var e=this.props,t=e.enableForgot,a=e.forgotAction,n=e.isError,i=e.errorResponse,o=e.placeHolder,r=e.labelText,s=e.isOTP,l=e.OTPResponse,c=e.maxLength;return d.a.createElement("div",{className:p()("form-group form-group-lg flat",{"has-error":n})},s?d.a.createElement("p",{className:"bold mb-0 meta-text"},l||"OTP Sent to your mobile"):null,d.a.createElement("div",{className:"label-animative input-link"},d.a.createElement("input",{type:"password",maxLength:c,className:"form-control",placeholder:o,onChange:this.onInputChange,autoComplete:"new-password"}),d.a.createElement("label",{className:"control-label"},r),s?d.a.createElement(g.a,{buttonClass:p()("btn btn-link",{"cursor-not-allowed":this.state.disabledResend}),onClickAction:this.onResendAction},d.a.createElement("span",{className:p()("",{"color-grey-medium":this.state.disabledResend,"color-primary-dark":!this.state.disabledResend})},"Resend? "+(this.state.disabledResend?"("+this.state.counterText+"s)":""))):null),t&&!Object(m.a)()?d.a.createElement("span",{className:"fine-text anchor-link vpadding-small pull-right semi-bold",onClick:a},"Forgot password?"):null,n?d.a.createElement("span",{className:"help-block"},"string"===typeof i?i:i.message):null)}}]),a}(c.Component)},2167:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(38),i=a(39),o=a(58),r=a(46),s=a(56),l=a(29),c=a(0),d=a.n(c),u=a(35),p=a.n(u),g=a(190),m=a(434);function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var b=function(e){Object(r.a)(a,e);var t=h(a);function a(e){var i;Object(n.a)(this,a),i=t.call(this,e);var r=(e||{}).mobileNumber||"",s=(e||{}).extNumber||"+91";return i.state={identifier:r,extensionNumber:s,showCode:r&&s,hideCountryCode:e.hideCountryCode,email:""},i.onIdentifierChange=i.onIdentifierChange.bind(Object(o.a)(i)),i.onExtenstionChange=i.onExtenstionChange.bind(Object(o.a)(i)),i.onFocus=i.onFocus.bind(Object(o.a)(i)),i.onBlur=i.onBlur.bind(Object(o.a)(i)),i}return Object(i.a)(a,[{key:"onBlur",value:function(e){var t=this.state.extensionNumber,a=1*parseInt(t.replace("+","0"));this.setState({showCode:""!==e.target.value,extensionNumber:/^\+{1}\d{1,4}$/.test(t)&&a?t:"+91"})}},{key:"componentDidUpdate",value:function(){Object(m.a)()}},{key:"onFocus",value:function(){this.setState({showCode:!0})}},{key:"onIdentifierChange",value:function(e){var t=this;if(isNaN(e.target.value)||""===e.target.value)return this.setState({identifier:e.target.value||"",hideCountryCode:!0},(function(){t.props.changeCall&&t.props.changeCall(t.state.identifier)})),!1;this.props.isSignUp&&(e.target.value=e.target.value.replace(/^0+/,"")),this.setState({identifier:e.target.value||"",hideCountryCode:!1},(function(){t.props.changeCall&&t.props.changeCall(t.state.extensionNumber+t.state.identifier,t.state.extensionNumber,t.state.identifier)})),this.props.onCountryCodeChange&&this.props.onCountryCodeChange({phoneCode:this.state.extensionNumber})}},{key:"onExtenstionChange",value:function(e){var t=this,a=e.target.value;if(a=a.replace("+",""),isNaN(a))return!1;this.setState({extensionNumber:"+"+a},(function(){t.props.changeCall&&t.props.changeCall(t.state.extensionNumber+t.state.identifier,t.state.extensionNumber,t.state.identifier)})),this.props.onIdentifierChange&&this.props.onIdentifierChange(this.state.identifier),this.props.onCountryCodeChange&&this.props.onCountryCodeChange({phoneCode:"+"+a})}},{key:"render",value:function(){var e=this.state,t=e.identifier,a=e.extensionNumber,n=e.showCode,i=e.hideCountryCode,o=this.props,r=o.isError,s=o.disabled,l=o.errorResponse,c=o.isChange,u=o.changeCall,m=o.placeholderText,h=void 0===m?"Enter Email/Mobile Number":m,b=o.helpText;return d.a.createElement("div",{className:p()("form-group form-group-lg flat",{"show-code":n,"has-error":r,"mobile-field":!i})},i?null:d.a.createElement("input",{type:"text",className:p()("form-control country-code",{"cursor-not-allowed":s}),placeholder:"+91",maxLength:5,disabled:s,onBlur:this.onBlur,autoComplete:"off",onChange:this.onExtenstionChange,onFocus:this.onFocus,value:a}),d.a.createElement("div",{className:p()("label-animative",{"input-link":c})},d.a.createElement("input",{className:p()("form-control",{"cursor-not-allowed":s}),placeholder:h,disabled:s,value:t,onChange:this.onIdentifierChange,onBlur:this.onBlur,autoComplete:"off",onFocus:this.onFocus}),d.a.createElement("label",{className:"control-label"}," ",h),c?d.a.createElement(g.a,{buttonClass:"btn btn-link",clickAction:u},d.a.createElement("span",{className:"color-primary-dark"},"Change?")):null),r||b?d.a.createElement("span",{className:"help-block"},r?l:b):null)}}]),a}(c.Component)}}]);